webpackJsonp([77],{"/d+P":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("ZLEe"),i=a.n(l),n=a("zY1m"),o=a("XH94"),s=a("a9+l"),r=a("/wGB"),c={data:function(){return{policyType:"",policyTypeMenu:{2:"奖励政策",3:"回款奖励"},policyStartDate:"",policyEndDate:"",status:"",statusMenu:{1:"未开启",2:"进行中",3:"已失效"},title:"",startDate:"",endStart:"",name:"",createUser:"",departmentId:"",tableData:[],totalRecords:0,totalPageCnt:0,pageIndex:1,pageSize:10,pagin_show:!0,policyStatus:""}},created:function(){var t=this.getsearchInfo(this.pageIndex);this.initData(t)},components:{datepicker:n.a,departComponet:o.a,elPagination:s.a},methods:{initData:function(t){var e=this;Object(r.b)(t).then(function(t){var a=t.data.data;i()(a.dataList).length>0?(e.totalRecords=a.totalRecords,e.totalPageCnt=a.totalPageCnt,e.pageIndex=a.pageIndex,e.tableData=a.dataList,e.pagin_show=!0):(e.tableData=[],e.pagin_show=!1)})},banStatus:function(t,e){var a=this,l={policyId:t,policyStatus:e};Object(r.e)(l).then(function(t){var e=a.getsearchInfo(a.pageIndex);a.initData(e)})},getsearchInfo:function(t){return{pageIndex:t,pageSize:this.pageSize,policyType:this.policyType,policyStartDate:this.policyStartDate,policyEndDate:this.policyEndDate,status:this.status,title:this.title,startDate:this.startDate,endStart:this.endStart,name:this.name,createUser:this.createUser,departmentId:this.departmentId,policyStatus:this.policyStatus}},spreadCon:function(){var t=document.querySelector(".slideDown");if(t.classList.contains("spreadSlowlly"))return t.classList.remove("spreadSlowlly"),!1;t.classList.add("spreadSlowlly")},selectSuccess:function(t){this.departmentId=t},changeSelect:function(t,e){console.log(t,e),"poliyData"==e?"startDate"==t.type?this.policyStartDate=t.data:this.policyEndDate=t.data:"startDate"==t.type?this.startDate=t.data:this.endDate=t.data},toCreatBusiCpy:function(){this.$router.push({path:"/add_promoPolicyZB"})},updataPage:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize;var e=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(e)},toInquire:function(){var t=this.getsearchInfo(1);this.initData(t)},exportBtn:function(){var t={policyType:this.policyType,policyStartDate:this.policyStartDate,policyEndDate:this.policyEndDate,status:this.status,title:this.title,startDate:this.startDate,endStart:this.endStart,name:this.name,createUser:this.createUser,departmentId:this.departmentId};exportData(t).then(function(t){var e=(new Date).getTime()+".xls",a=new Blob([t.data]),l=document.createElement("a");l.download=e,l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)})},view:function(t,e){this.$router.push({path:"/view_promoPolicyZB",query:{id:t,type:e}})},edit:function(t,e,a){this.$router.push({path:"/edit_promoPolicyZB",query:{id:t,type:e,handleType:a}})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_wrap"},[a("div",[a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.toCreatBusiCpy()}}},[t._v("添加")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"政策类型："}},[a("el-select",{attrs:{placeholder:"请选择政策类型"},model:{value:t.policyType,callback:function(e){t.policyType=e},expression:"policyType"}},[a("el-option",{attrs:{label:"请选择政策类型",value:"0"}}),t._v(" "),t._l(t.policyTypeMenu,function(t,e,l){return a("el-option",{key:l,attrs:{label:t,value:e}})})],2)],1),t._v(" "),a("div",{staticClass:"div-inline el-form-item"},[a("div",{staticClass:"div-inline"},[t._v("政策有效期：")]),t._v(" "),a("datepicker",{staticClass:"div-inline",attrs:{startIsShow:"true",endIsShow:"true"},on:{changeSelect:function(e){return t.changeSelect(e,"poliyData")}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"政策状态："}},[a("el-select",{attrs:{placeholder:"请选择政策状态"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{label:"请选择政策状态",value:"0"}}),t._v(" "),t._l(t.statusMenu,function(t,e,l){return a("el-option",{key:l,attrs:{label:t,value:e}})})],2)],1),t._v(" "),a("div",{staticClass:"div-inline el-form-item"},[a("depart-componet",{on:{selectSuccess:t.selectSuccess}})],1),t._v(" "),a("el-form-item",{attrs:{label:"适用范围："}},[a("el-input",{attrs:{placeholder:"请输入适用范围"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),t._e(),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.toInquire()}}},[t._v("查询")])],1),t._v(" "),a("el-form",{ref:"form",staticClass:"demo-form-inline slideDown",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"启用状态："}},[a("el-select",{attrs:{placeholder:"请选择政策类型"},model:{value:t.policyStatus,callback:function(e){t.policyStatus=e},expression:"policyStatus"}},[a("el-option",{attrs:{label:"请选择启用状态",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"禁用",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"政策名称："}},[a("el-input",{attrs:{placeholder:"请输入政策名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"适用范围："}},[a("el-input",{attrs:{placeholder:"请输入适用范围"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"创建人："}},[a("el-input",{attrs:{placeholder:"请输入创建人"},model:{value:t.createUser,callback:function(e){t.createUser=e},expression:"createUser"}})],1),t._v(" "),a("div",{staticClass:"div-inline el-form-item"},[a("div",{staticClass:"div-inline"},[t._v("创建时间：")]),t._v(" "),a("datepicker",{staticClass:"div-inline",attrs:{startIsShow:"true",endIsShow:"true"},on:{changeSelect:function(e){return t.changeSelect(e,"creatData")}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{attrs:{data:t.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"policyType",label:"政策类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t         \t"+t._s(2==e.row.policyType?"奖励政策":"回款奖励")+"\n\t\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"政策名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"policyStartDate",label:"开始日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"policyEndDate",label:"结束日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"listUser",label:"适用范围","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.listUser,function(e,l){return a("span",{key:l},[t._v("\n\t\t\t    \t\t\t"+t._s(e.name)+"\n\t\t\t    \t\t")])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.status)+"\n\t\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"policyStatusStr",label:"启用状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"departmentId",label:"事业部"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t         \t"+t._s(1==e.row.departmentId?"心脑事业部":2==e.row.departmentId?"风湿及骨科事业部":3==e.row.departmentId?"云事业部":"消化事业部")+"\n\t\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.policyStatus?a("div",{staticClass:"operateBtn",on:{click:function(a){t.banStatus(e.row.id,1)}}},[t._v("启用")]):t._e(),t._v(" "),1==e.row.policyStatus?a("div",{staticClass:"operateBtn",on:{click:function(a){t.banStatus(e.row.id,2)}}},[t._v("禁用")]):t._e(),t._v(" "),1==e.row.flag?a("div",{staticClass:"operateBtn",on:{click:function(a){t.edit(e.row.id,e.row.policyType,1)}}},[t._v("修改")]):t._e(),t._v(" "),a("div",{staticClass:"operateBtn",on:{click:function(a){t.view(e.row.id,e.row.policyType)}}},[t._v("查看")]),t._v(" "),a("div",{staticClass:"operateBtn",on:{click:function(a){t.edit(e.row.id,e.row.policyType,2)}}},[t._v("复制")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1)])},staticRenderFns:[]};var d=a("C7Lr")(c,p,!1,function(t){a("sNmO")},"data-v-2cee2d6a",null);e.default=d.exports},sNmO:function(t,e){}});
//# sourceMappingURL=77.f851d94265110a7900e8.js.map