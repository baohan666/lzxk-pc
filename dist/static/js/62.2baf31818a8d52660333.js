webpackJsonp([62],{"89TL":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("a9+l"),i=a("eYXE"),o={data:function(){var t=this;return{startDate:"",endDate:"",submitter:"",position:"",depart:"",questionType:"",totalRecords:0,totalPageCnt:0,pageIndex:1,pageSize:10,pagin_show:"",pickerOptionStar:{disabledDate:function(e){var a=t.endDate;if(a)return e.getTime()>a}},pickerOptionEnd:{disabledDate:function(e){var a=t.startDate;if(a)return e.getTime()<a}},tableData:[],departmentList:[{name:"请选择事业部",value:""},{name:"心脑事业部",value:1},{name:"风湿及骨科事业部",value:2},{name:"云事业部",value:3},{name:"消化事业部",value:4}],questionTypeList:[{name:"请选择问题分类",value:""},{name:"其他",value:2},{name:"朗致销客",value:3}]}},mounted:function(){var t=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(t)},components:{elPagination:n.a},methods:{initData:function(t){var e=this;Object(i.g)(t).then(function(t){if(1==t.data.code){var a=t.data.data;a.dataList.length>0?(e.totalRecords=a.totalRecords,e.totalPageCnt=a.totalPageCnt,e.pageIndex=a.pageIndex,e.tableData=a.dataList,e.pagin_show=!0):(e.tableData=[],e.pagin_show=!1)}else e.pagin_show=!1})},updataPage:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize;var e=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(e)},transformDate:function(t){var e=t;if(""==e)return"";var a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");return e.getFullYear()+"-"+a+"-"+n},getsearchInfo:function(t,e){var a=this.transformDate(this.startDate),n=this.transformDate(this.endDate);return{pageIndex:t,pageSize:e,name:this.submitter,type:this.questionType,position:this.position,departmentId:this.depart,startDate:a,endDate:n}},toInquire:function(){var t=this.getsearchInfo(1,this.pageSize);this.initData(t)},viewDetails:function(t){this.$router.push({path:"/detailFeedbackZB",query:{id:t}})},exportBtn:function(){var t={name:this.submitter,type:this.questionType,position:this.position,departmentId:this.depart,startDate:this.transformDate(this.startDate),endDate:this.transformDate(this.endDate)};Object(i.d)(t).then(function(t){var e=(new Date).getTime()+".xls",a=new Blob([t.data]),n=document.createElement("a");n.download=e,n.style.display="none",n.href=URL.createObjectURL(a),console.log(n.href),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_wrap"},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0}},[a("div",{staticClass:"div-inline block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"提交开始时间","picker-options":t.pickerOptionStar},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),a("div",{staticClass:"div-inline"},[t._v("-")]),t._v(" "),a("div",{staticClass:"div-inline block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"提交结束时间","picker-options":t.pickerOptionEnd},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入提交人"},model:{value:t.submitter,callback:function(e){t.submitter=e},expression:"submitter"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入省区"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{id:"changeDepart",placeholder:"请选择事业部"},model:{value:t.depart,callback:function(e){t.depart=e},expression:"depart"}},t._l(t.departmentList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{id:"questionType",placeholder:"请选择问题分类"},model:{value:t.questionType,callback:function(e){t.questionType=e},expression:"questionType"}},t._l(t.questionTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.toInquire()}}},[t._v("查询")]),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:t.exportBtn}},[t._v("导出")])],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{attrs:{data:t.tableData,border:"",id:"out-table","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{prop:"number",label:"编号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"提交时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"problemType",label:"问题分类",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t         \t"+t._s(2==e.row.problemType?"其他":"朗致销客")+"\n\t\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"提交人",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"departmentId",label:"所属事业部"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t         \t"+t._s(0==e.row.departmentId?"顶级部门":1==e.row.departmentId?"心脑事业部":2==e.row.departmentId?"风湿及骨科事业部":3==e.row.departmentId?"云事业部":"消化事业部")+"\n\t\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"treeName",label:"所属部门"}}),t._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职务",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t        "+t._s(1==e.row.position?"省区经理":2==e.row.position?"地区经理":3==e.row.position?"县区经理":"省办人员")+"\n\t\t\t    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"advice",label:"意见/建议"}})],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1)])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("teL6")},"data-v-63751034",null);e.default=l.exports},teL6:function(t,e){}});
//# sourceMappingURL=62.2baf31818a8d52660333.js.map