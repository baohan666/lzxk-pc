webpackJsonp([76],{"+wqK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),o=a.n(i),r=a("Agyp"),n=a("Xrov"),s=a("ROW2"),c=a("cW/P"),l={name:"detailFeedbackZB",data:function(){return{infoList:[],tableData:[],searchCity:this.$route.query.searchCity,searchCounty:this.$route.query.searchCounty,changeReason:"",dialogReasonVisible:!1,changPriLogData:[],priceInfo:[],obj:{},changPriceNum:0}},created:function(){this.initData()},components:{goBack:r.a,changePriceLog:n.a},methods:{initData:function(){var e=this;Object(c.u)({goodsId:this.$route.query.goodsId,managerId:this.$route.query.userId,userId:this.$route.query.userId,searchCity:this.goodsName,searchCounty:this.goodsName_xian}).then(function(t){e.infoList=t.data.data.headObj,e.tableData=t.data.data.listJson.areaArray,console.log(e.tableData)})},submitChangePrice:function(){var e=this,t={priceInfo:this.priceInfo,changeReason:this.changeReason},a={arrayListStr:o()(t),applyType:2,userId:Object(s.b)("accountId")};console.log(a),Object(c.y)(a).then(function(t){e.$router.go(-1)})},handleChange:function(e,t){var a=1,i=1;if("cityPrice"==t?(i=e.areaPrice,e.provincePrice,a=4):(i=e.areaPrice,e.countyPrice,a=5),"oldPrice"==i)return!1;console.log(e);var o={priceType:a,goodsId:this.$route.query.goodsId,oldPrice:e.oldAreaPrice,newPrice:i,userId:e.userId};this.priceInfo=[],console.log(o.userId),o.userId in this.obj?(console.log(this.obj),console.log(o.userId),console.log(this.obj[o.userId]),1==o.priceType?this.obj[o.userId][0]=o:2==o.priceType?this.obj[o.userId][1]=o:3==o.priceType?this.obj[o.userId][2]=o:4==o.priceType?this.obj[o.userId][0]=o:5==o.priceType&&(this.obj[o.userId][0]=o)):(this.obj[o.userId]=[],this.obj[o.userId][0]=o,console.log(this.obj)),this.priceInfo.push(this.obj),this.changPriceNum=this.priceInfo.length,console.log(this.priceInfo)},handleInput2:function(e){e.target.value=e.target.value.match(/^\d*(\.?\d{0,1})/g)[0]||null},showChangePriceLog:function(e,t,a,i){var o=this,r=0;console.log(i),r="地区经理"==a?2:3,null==e&&(e=0);var n={pageIndex:1,pageSize:10,priceId:e,goodsId:this.$route.query.goodsId,managerId:t,userId:i,logType:r};console.log(n),Object(c.k)(n).then(function(e){o.changPriLogData=e.data.data,console.log(o.changPriLogData),o.$refs.changePriceLog.dialogShow()})},toInquire:function(){this.initData()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("go-back",{attrs:{title:"改价"}}),e._v(" "),a("div",{staticClass:"infoDetail"},[a("el-row",{attrs:{gutter:20}},[a("span",[e._v(e._s(e.infoList.goodsName))]),e._v(" "),a("span",[e._v(e._s(e.infoList.goodsSpec))]),e._v(" "),a("span",[e._v(e._s(e.infoList.goodsManufacturer))]),e._v(" "),a("span",[e._v(e._s(e.infoList.goodsType))])]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("span",[e._v("公司标准价-省区： "+e._s(e.infoList.provinceStandardPrice))]),e._v(" "),a("span",[e._v("公司标准价-地区： "+e._s(e.infoList.cityStandardPrice))]),e._v(" "),a("span",[e._v("公司标准价-县区： "+e._s(e.infoList.countyStandardPrice))]),e._v(" "),a("span",[e._v("公司定价-省区： "+e._s(e.infoList.provinceFixedPrice))]),e._v(" "),a("span",[e._v("公司定价-地区： "+e._s(e.infoList.cityFixedPrice))]),e._v(" "),a("span",[e._v("公司定价-县区： "+e._s(e.infoList.countyFixedPrice))])])],1),e._v(" "),a("div",{staticClass:"table_wrap"},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入地区经理名称或地区名称"},model:{value:e.searchCity,callback:function(t){e.searchCity="string"==typeof t?t.trim():t},expression:"searchCity"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入县区经理名称或县区名称"},model:{value:e.searchCounty,callback:function(t){e.searchCounty="string"==typeof t?t.trim():t},expression:"searchCounty"}})],1),e._v(" "),a("div",{staticClass:"div-inline el-button-red bitchRemove",on:{click:e.toInquire}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"detail_content qualifiInfo_wraper"},[a("div",{staticClass:"qualifiInfo_table"},[a("el-row",{staticClass:"titleThead"},[a("el-col",{attrs:{span:5}},[e._v("区域名")]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v("区域经理姓名")]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v("职务")]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v("价格")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("操作")])],1),e._v(" "),e._l(e.tableData,function(t,i){return""==e.searchCity&&""==e.searchCounty?a("div",{key:i},[a("el-row",[a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.areaName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.userName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.position))]),e._v(" "),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cityObject.areaPrice,expression:"item.cityObject.areaPrice",modifiers:{trim:!0}}],class:{tableInput:!0,color_red:e.infoList.cityStandardPrice<t.cityObject.areaPrice,color_blue:e.infoList.cityStandardPrice>t.cityObject.areaPrice},attrs:{placeholder:"请输入价格",type:"number"},domProps:{value:t.cityObject.areaPrice},on:{change:function(a){e.handleChange(t.cityObject,"areaPrice")},keydown:e.handleInput2,input:function(a){a.target.composing||e.$set(t.cityObject,"areaPrice",a.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"operateBtn",on:{click:function(a){e.showChangePriceLog(t.cityObject.id,t.cityObject.managerUserId,t.cityObject.position,t.cityObject.userId)}}},[e._v("改价日志")])])],1),e._v(" "),e._l(t.countyArray,function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:5}},[e._v(e._s(t.areaName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.userName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.position))]),e._v(" "),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.areaPrice,expression:"menuCounty.areaPrice",modifiers:{trim:!0}}],class:{tableInput:!0,color_red:e.infoList.countyStandardPrice<t.areaPrice,color_blue:e.infoList.countyStandardPrice>t.areaPrice},attrs:{placeholder:"请输入价格",type:"number"},domProps:{value:t.areaPrice},on:{change:function(a){e.handleChange(t,"countyPrice")},keydown:e.handleInput2,input:function(a){a.target.composing||e.$set(t,"areaPrice",a.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"operateBtn",on:{click:function(a){e.showChangePriceLog(t.id,t.managerUserId,t.position,t.userId)}}},[e._v("\n                改价日志\n              ")])])],1)})],2):e._e()}),e._v(" "),e._l(e.tableData,function(t,i){return""!=e.searchCity||""!=e.searchCounty?a("div",{key:i},[a("el-row",[a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.areaName)+"22")]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.userName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.cityObject.position))]),e._v(" "),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cityObject.areaPrice,expression:"item.cityObject.areaPrice",modifiers:{trim:!0}}],class:{tableInput:!0,color_red:e.infoList.cityStandardPrice<t.cityObject.areaPrice,color_blue:e.infoList.cityStandardPrice>t.cityObject.areaPrice},attrs:{placeholder:"请输入价格",type:"number"},domProps:{value:t.cityObject.areaPrice},on:{change:function(a){e.handleChange(t.cityObject,"cityPrice")},keydown:e.handleInput2,input:function(a){a.target.composing||e.$set(t.cityObject,"areaPrice",a.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"operateBtn",on:{click:function(a){e.showChangePriceLog(t.cityObject.id,t.cityObject.managerUserId,t.cityObject.position,t.cityObject.userId)}}},[e._v("改价日志")])])],1),e._v(" "),e._l(t.countyArray,function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:5}},[e._v(e._s(t.areaName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.userName))]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(t.position))]),e._v(" "),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.areaPrice,expression:"menuCounty.areaPrice",modifiers:{trim:!0}}],class:{tableInput:!0,color_red:e.infoList.countyStandardPrice<t.areaPrice,color_blue:e.infoList.countyStandardPrice>t.areaPrice},attrs:{placeholder:"请输入价格",type:"number"},domProps:{value:t.areaPrice},on:{change:function(a){e.handleChange(t,"countyPrice")},keydown:e.handleInput2,input:function(a){a.target.composing||e.$set(t,"areaPrice",a.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"operateBtn",on:{click:function(a){e.showChangePriceLog(t.id,t.managerUserId,t.position,t.userId)}}},[e._v("\n                改价日志\n              ")])])],1)})],2):e._e()})],2)])],1),e._v(" "),a("div",{staticClass:"operateWraper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.changPriceNum>0,expression:"changPriceNum>0"}],staticClass:"div-inline el-button-red",on:{click:function(t){e.dialogReasonVisible=!0}}},[e._v("提交改价")])]),e._v(" "),a("changePriceLog",{ref:"changePriceLog",attrs:{changPriLogData:e.changPriLogData}}),e._v(" "),a("el-dialog",{attrs:{title:"改价原因",visible:e.dialogReasonVisible,"append-to-body":!0,width:"35%"},on:{"update:visible":function(t){e.dialogReasonVisible=t}}},[a("div",{staticClass:"dialog_body_content"},[a("div",{staticClass:"dialog_changePrice_reason"},[e._v("\n        改价原因：\n        "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.changeReason,expression:"changeReason"}],staticClass:"checkReason",attrs:{placeholder:"请填写改价原因",name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.changeReason},on:{input:function(t){t.target.composing||(e.changeReason=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:""==e.changeReason,expression:"changeReason==''"}],staticClass:"dialogDisaBtn",attrs:{type:"danger",disabled:""}},[e._v("确定")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.changeReason,expression:"changeReason!=''"}],staticClass:"dialog-sure-btn dialoperateBtn",on:{click:function(t){e.submitChangePrice()}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var u=a("C7Lr")(l,d,!1,function(e){a("TKLL")},"data-v-3017c169",null);t.default=u.exports},TKLL:function(e,t){}});
//# sourceMappingURL=76.ed9371df76b5209dce25.js.map