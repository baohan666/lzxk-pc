webpackJsonp([44],{B5Fh:function(t,e,a){"use strict";a.d(e,"e",function(){return o}),a.d(e,"c",function(){return r}),a.d(e,"j",function(){return l}),a.d(e,"k",function(){return d}),a.d(e,"a",function(){return c}),a.d(e,"g",function(){return u}),a.d(e,"h",function(){return h}),a.d(e,"f",function(){return f}),a.d(e,"i",function(){return p}),a.d(e,"l",function(){return m}),a.d(e,"b",function(){return v}),a.d(e,"d",function(){return b});var n=a("lta2"),i=a("6iV/"),s=a.n(i),o=function(t){return n.a.get(n.a.baseURL+"provinceAccount/list",{params:t})},r=function(t){return n.a.get(n.a.baseURL+"provinceAccount/banAccount",{params:t})},l=function(t){return n.a.get(n.a.baseURL+"provinceAccount/pullList")},d=function(t){return n.a.get(n.a.baseURL+"provinceAccount/save",{params:t})},c=function(t){return n.a.get(n.a.baseURL+"provinceAccount/pull",{params:t})},u=function(t){return n.a.get(n.a.baseURL+"provinceRole/list",{params:t})},h=function(t){return n.a.get(n.a.baseURL+"menu/provinceMenuList",{params:t})},f=function(t){return n.a.get(n.a.baseURL+"menu/nextMenuList",{params:t})},p=function(t){return n.a.post(n.a.baseURL+"role/insertRole",s.a.stringify(t))},m=function(t){return n.a.post(n.a.baseURL+"role/updateRole",s.a.stringify(t))},v=function(t){return n.a.get(n.a.baseURL+"role/deleteRole",{params:t})},b=function(t){return n.a.get(n.a.baseURL+"role/forOrStaRole",{params:t})}},RhZM:function(t,e){},wkv2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("hRKE"),i=a.n(n),s=a("3cXf"),o=a.n(s),r=a("HzJ8"),l=a.n(r),d=a("ZLEe"),c=a.n(d),u=a("B5Fh"),h={data:function(){return{isSatus:!1,handleEditShow:!1,handleEditShowStatus:!1,loading:!0,dataTree:[],dataTreeCheck:[],defaultProps:{oId:"id",label:"name",children:"sub"},props:{children:"children",label:"menuName"},isAdd:!1,nextTree:[],subTree:[],delStatus:!0,input:"",statusAll:"",sel:"",totalRecords:0,totalPageCnt:0,pagin_show:!0,pageIndex:1,pageSize:10,checkedDept:[],departmentList:[],tableData:[],multipleSelection:[],select_cate:"",select_word:"",getSelOption:[],roleList:[],checkDeptArr:[],forOrStaMsg:"启用",is_search:!1,editVisible:!1,delVisible:!1,forOrStaVisible:!1,forbiddenBtnShow:!1,departmentId:[],twoMenu:[],form:{name:"",remark:"",status:"",departmentList:"",departmentId:[],oneMenu:[]},updateRoleJson:{id:"",name:"",remark:"",departmentId:"",oneMenu:[]},formJson:{name:"",remark:"",departmentId:"",oneMenu:[],twoMenu:[]},idDel:"",roleId:"",idx:-1,isStu:"",resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[]}},mounted:function(){this.getData(this.pageIndex,this.pageSize)},components:{elPagination:a("a9+l").a},inject:["reload"],methods:{getData:function(t,e,a){var n=this;Object(u.g)({pageIndex:t,pageSize:e,status:a}).then(function(t){var e=t.data.data;c()(e.dataList).length>0?(n.totalRecords=e.totalRecords,n.totalPageCnt=e.totalPageCnt,n.pageIndex=e.pageIndex,n.tableData=e.dataList,n.pagin_show=!0):(n.tableData=[],n.pagin_show=!1)})},formatterStatus:function(t,e){switch(t.status){case 0:return"删除";case 1:return"正常";case 2:return"禁用"}},updataPage:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.getData(this.pageIndex,this.pageSize,this.statusAll)},addRole:function(){var t=this;this.form.name="",this.form.remark="",this.form.departmentList=[],this.formJson.oneMenu=[],this.isAdd=!1,this.handleEditShowStatus=!1,this.formJson.departmentId=[],Object(u.h)().then(function(e){t.dataTree=e.data.data.menuList,t.departmentList=e.data.data.departmentList,console.log(t.departmentList),t.loading=!1}),this.handleEditShow=!0},backBtn:function(){this.getData(this.pageIndex,this.pageSize,this.statusAll),this.handleEditShow=!1},handleEdit:function(t,e){var a=this;console.log(e),this.roleId=e.id,this.idx=t,this.form={name:e.name,remark:e.remark,status:e.status},this.departmentId=[],this.handleEditShowStatus=!0,Object(u.a)({id:e.id}).then(function(t){if(console.log(t),1==t.data.code){a.dataTreeCheck=t.data.data.permissionList,a.departmentList=t.data.data.departmentList;var e=!0,n=!1,i=void 0;try{for(var s,o=l()(a.departmentList);!(e=(s=o.next()).done);e=!0){var r=s.value;r.is_check&&a.departmentId.push(r.id)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}else alert(t.data.msg)}),this.handleEditShow=!0},loadNode:function(t,e){1===t.level&&Object(u.f)({id:t.key}).then(function(t){console.log(t),1==t.data.code&&setTimeout(function(){e(t.data.data)},200)}),2===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)}),3===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)}),4===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)}),5===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)}),6===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)}),7===t.level&&Object(u.f)({id:t.key}).then(function(t){setTimeout(function(){e(t.data.data)},200)})},saveEditRole:function(){this.handleEditShowStatus||Object(u.i)({data:o()(this.formJson)})},updateRole:function(t){var e=this;Object(u.l)(t).then(function(t){console.log(t),e.reload(),e.$message.success("编辑角色成功")})},insertRole:function(t){var e=this;Object(u.i)(t).then(function(t){e.reload(),e.$message.success("创建角色成功")})},handleCheck:function(t,e){var a=this;this.isAdd=!0,this.roleId=e.id,this.form={name:e.name,remark:e.remark,status:e.status},Object(u.a)({id:e.id}).then(function(t){console.log(t),a.departmentList=t.data.data.departmentList,a.dataTreeCheck=t.data.data.permissionList,a.traversalDept(),a.traversalObject(a.dataTreeCheck),setTimeout(function(){a.traversalDisable(a.dataTreeCheck)},200),a.handleEditShow=!0}),this.handleEditShowStatus=!0,this.handleEditShow=!0,this.checkBtnShow=!1},traversalDept:function(){this.checkList=[];var t=!0,e=!1,a=void 0;try{for(var n,i=l()(this.departmentList);!(t=(n=i.next()).done);t=!0){var s=n.value;1==s.is_check&&this.checkList.push(s.id)}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}},traversalObject:function(t){for(var e in t){if("children"==e&&this.isArray(t[e])){var a=!0,n=!1,s=void 0;try{for(var o,r=l()(t[e]);!(a=(o=r.next()).done);a=!0){var d=o.value;d.check&&this.resourceCheckedKey.push(d.id)}}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}}"object"==i()(t[e])&&(1==t.level&&1==t.check&&this.resourceCheckedKey.push(t.id),this.traversalObject(t[e]))}},traversalDisable:function(t){for(var e in t){if("children"==e&&this.isArray(t[e])){var a=!0,n=!1,s=void 0;try{for(var o,r=l()(t[e]);!(a=(o=r.next()).done);a=!0){o.value.disabled=!0}}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}}"object"==i()(t[e])&&this.traversalDisable(t[e])}},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},handleDelete:function(t,e){this.idDel=e.id,this.delVisible=!0},deleteRow:function(){var t=this;Object(u.b)({id:this.idDel}).then(function(e){1==e.data.code?t.getData(t.pageIndex,t.pageSize,t.statusAll):alert(e.data.msg)}),this.delVisible=!1},handleSelectionChange:function(t){this.multipleSelection=t},search:function(){this.getData(1,this.pageSize,this.statusAll)},handleCurrentChange:function(t){this.pageIndex=t,this.getData(this.pageIndex,this.pageSize,this.statusAll)},handleSizeChange:function(t){},handleForOrSta:function(t,e){this.idDel=e.id,console.log(this.tableData[t]),1==e.status?this.forOrStaRow(2):this.forOrStaRow(1)},forOrStaRow:function(t){var e=this;Object(u.d)({id:this.idDel,status:t}).then(function(t){console.log(t),1==t.data.code?e.getData(e.pageIndex,e.pageSize,e.statusAll):alert(t.data.msg)})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.handleEditShow,expression:"!handleEditShow"}],attrs:{id:""}},[a("div",{staticClass:"search_wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("button",{staticClass:"el-button-red",on:{click:function(e){t.addRole()}}},[t._v("创建角色")]),t._v(" "),a("el-form-item",{attrs:{label:"账号状态:"}},[a("el-select",{attrs:{placeholder:"全部状态"},model:{value:t.statusAll,callback:function(e){t.statusAll=e},expression:"statusAll"}},[a("el-option",{attrs:{label:"全部状态",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"删除",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"正常",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"禁用",value:"3"}})],1)],1),t._v(" "),a("button",{staticClass:"el-button-red",on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",width:"60px",type:"index",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"账号数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",formatter:t.formatterStatus}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleCheck(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleForOrSta(e.$index,e.row)}}},[t._v(t._s(2==e.row.status?"解禁":"禁用"))]):t._e(),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,"append-to-body":!0,center:"",width:"30%"},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticStyle:{"text-align":"center","line-height":"100px"}},[a("span",[t._v("您确定要删除吗？")])]),t._v(" "),a("span",{attrs:{slot:"footer",calss:"dialog-footer"},slot:"footer"},[a("button",{staticClass:"el-button-red",on:{click:t.deleteRow}},[t._v("确定")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShow,expression:"handleEditShow"}],staticClass:"handleSeloShow"},[a("div",[a("span",{staticClass:"product_button",on:{click:t.backBtn}},[t._v("返回")])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"adminDetailBox"},[a("el-form",{ref:"form",staticStyle:{border:"1px solid red,"},attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShowStatus,expression:"handleEditShowStatus"}],attrs:{label:"状态:"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.form.status,expression:"form.status == 1"}],staticClass:"status"},[t._v("正常")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==t.form.status,expression:"form.status == 2"}],staticClass:"status"},[t._v("禁用")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==t.form.status,expression:"form.status == 0"}],staticClass:"status"},[t._v("删除")])]),t._v(" "),a("el-form-item",{attrs:{label:"角色描述:"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.remark,expression:"form.remark"}],staticClass:"addRoleRemark",attrs:{id:"editRoleRemark",type:"text",maxlength:"100"},domProps:{value:t.form.remark},on:{input:function(e){e.target.composing||t.$set(t.form,"remark",e.target.value)}}})]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.handleEditShowStatus,expression:"!handleEditShowStatus"}],attrs:{label:"角色权限:"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tree",attrs:{data:t.dataTree,load:t.loadNode,props:t.defaultProps,"show-checkbox":"",lazy:"","node-key":"id","default-checked-keys":t.resourceCheckedKey}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShowStatus,expression:"handleEditShowStatus"}],attrs:{label:"角色权限:"}},[a("el-tree",{ref:"treeCheck",attrs:{data:t.dataTreeCheck,"node-key":"menuId","show-checkbox":"",props:t.props}})],1)],1)],1),t._v(" "),a("div",{staticClass:"adminDetailBox",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"product_button",on:{click:t.saveEditRole}},[t._v("确定")]),t._v(" "),a("span",{staticClass:"product_button",on:{click:function(e){t.handleEditShow=!1}}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"adminDetailBox"},[e("span",{staticClass:"adminDetailTitle"},[this._v("\n\t\t\t\t\t\t基本信息\n\t\t\t\t\t")])])}]};var p=a("C7Lr")(h,f,!1,function(t){a("RhZM")},"data-v-14c53054",null);e.default=p.exports}});
//# sourceMappingURL=44.d3042606bb67e325d492.js.map