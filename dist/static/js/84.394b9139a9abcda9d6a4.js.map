{"version":3,"sources":["webpack:///src/pages/province/goodsManage/batChangePrice.vue","webpack:///./src/pages/province/goodsManage/batChangePrice.vue?a5a3","webpack:///./src/pages/province/goodsManage/batChangePrice.vue"],"names":["batChangePrice","name","data","pricenum","areaName","areaManager","position","userId","areaCode","managerUserId","tableData","goodsName","changPriLogData","priceInfo","obj","changPriceNum","changeReason","dialogReasonVisible","created","this","initData","components","goBack","changePriceLog","methods","_this","console","log","Object","goodsManage","$route","query","priceId","then","res","goodsList","submitChangePrice","_this2","arrayListStr","datalist","stringify_default","cache","$router","go","handleChange","dataRow","type","oldPrice","newPrice","provincePrice","oldProvincePrice","cityPrice","oldCityPrice","fewPrice","oldCountyPrice","goodsId","priceType","push","length","handleInput2","e","target","value","match","changePartPrice","$id","$managerUserId","path","managerId","searchCity","searchCounty","showChangePriceLog","$position","$goodsId","_this3","logType","pageIndex","pageSize","$refs","dialogShow","goodsManage_batChangePrice","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","gutter","_s","ref","border","tooltip-effect","max-height","prop","label","scopedSlots","_u","key","fn","scope","directives","rawName","row","expression","modifiers","trim","class","tableInput","color_red","fixedPrice","color_blue","domProps","on","change","$event","keydown","input","composing","$set","blur","$forceUpdate","click","visible","append-to-body","width","update:visible","placeholder","id","cols","rows","slot","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/84.394b9139a9abcda9d6a4.js","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<go-back title=\"改价\"></go-back>\r\n\t\t<div class=\"infoDetail\">\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<span>{{areaName}}</span>\r\n\t\t\t\t<span>{{areaManager}}</span>\r\n\t\t\t\t<span>{{position}}</span>\r\n\t\t\t</el-row>\r\n\r\n\t\t</div>\r\n\t\t<div class=\"table_wrap\">\r\n\t\t\t<el-table ref=\"multipleTable\" :data=\"tableData\" border tooltip-effect=\"dark\" max-height=\"530\">\r\n\t\t\t    <el-table-column prop=\"goodsName\" label=\"商品名称\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"specsMax\" label=\"规格\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"manufacturer\" label=\"生产企业\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"drugType\" label=\"剂型\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"standPrice\" label=\"公司标准价\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"fixedPrice\" label=\"省区定价\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"fewPrice\" label=\"价格\">\r\n\t\t\t    \t<template slot-scope=\"scope\">\r\n\t\t\t\t\t    <input\r\n                v-model.trim=\"scope.row.fewPrice\"\r\n                @change=\"handleChange(scope.row,'countyPrice')\"\r\n                type=\"number\" @keydown=\"handleInput2\"\r\n                :class=\"{'tableInput': true, 'color_red'\r\n                :scope.row.fixedPrice < scope.row.fewPrice, 'color_blue' : scope.row.fixedPrice > scope.row.fewPrice}\"></input>\r\n\t\t\t\t\t</template>\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column prop=\"address\" label=\"操作\">\r\n\t\t\t    \t<template slot-scope=\"scope\">\r\n\t\t\t\t        <div class=\"operateBtn\" @click=\"showChangePriceLog(scope.row.priceId, scope.row.position, scope.row.goodsId)\">改价日志</div>\r\n\t\t\t\t    </template>\r\n\t\t\t    </el-table-column>\r\n\t\t  \t</el-table>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"operateWraper\">\r\n\t\t\t<div class=\"div-inline el-button-red\" v-show=\"changPriceNum>0\" @click = \"dialogReasonVisible=true\">提交改价</div>\r\n\t\t</div>\r\n\t\t<changePriceLog ref=\"changePriceLog\" :changPriLogData=\"changPriLogData\"></changePriceLog>\r\n\t\t<el-dialog title=\"改价原因\" :visible.sync=\"dialogReasonVisible\" :append-to-body='true' width=\"35%\">\r\n\t\t\t<div class= 'dialog_body_content'>\r\n\t\t\t\t<div class=\"dialog_changePrice_reason\">\r\n\t\t\t\t\t改价原因：\r\n\t\t\t\t\t<textarea class=\"checkReason\" placeholder=\"请填写改价原因\" v-model=\"changeReason\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n    \t\t\t<el-button v-show=\"changeReason==''\" type=\"danger\" class=\"dialogDisaBtn\" disabled>确定</el-button>\r\n\t\t\t\t<span v-show=\"changeReason!=''\" class=\"dialog-sure-btn dialoperateBtn\" @click=\"submitChangePrice()\">确定</span>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n\r\n</template>\r\n<script>\r\n\timport goBack from 'src/components/goBack';\r\n\timport changePriceLog from 'src/components/changePriceLog';\r\n\timport {getStore} from 'src/config/cache'\r\n\r\n\r\n  \timport {getBatchChaPriceData, getChangePriceLogData, saveBatchChaPriceData} from 'src/api/province_url/goodsManage';\r\n\r\n  export default {\r\n  \tname : 'detailFeedbackZB',\r\n    data() {\r\n      \treturn {\r\n      \t\tpricenum:212,\r\n      \t\tareaName:'',//地区名称\r\n       \t\tareaManager:'',//经理名称\r\n       \t\tposition:'',//职务\r\n       \t\tuserId:'',//\r\n          areaCode:'',// 经理所属区域\r\n       \t\tmanagerUserId:\"\",//经理 ID\r\n       \t\ttableData: [],\t//数据列表\r\n       \t\tgoodsName: '',//省区经理及省区名称\r\n       \t\tchangPriLogData:[],//改价日志数据\r\n       \t\tpriceInfo: [],//改价数据集合\r\n          obj:{},\r\n       \t\tchangPriceNum:0,\r\n       \t\tchangeReason: '',//改价原因\r\n       \t\tdialogReasonVisible: false\r\n      \t}\r\n    },\r\n    created(){\r\n\t\tthis.initData()\r\n\t},\r\n\tcomponents:{\r\n\t\tgoBack,\r\n\t    changePriceLog\r\n\t},\r\n    methods: {\r\n        initData(){\r\n          console.log()\r\n\t        getBatchChaPriceData({\r\n            \"areaCode\": this.$route.query.areaCode,// 经理所属区域\r\n            \"priceId\": this.$route.query.priceId,\r\n            // 'areaCode': this.$route.query.areaCode\r\n\t        }).then(res => {\r\n            this.areaName=res.data.data.areaName;\r\n            this.areaManager=res.data.data.areaManager;\r\n            this.position=res.data.data.position;\r\n            this.managerUserId=res.data.data.managerUserId;\r\n            this.tableData =res.data.data.goodsList;\r\n            this.userId = res.data.data.userId;\r\n\t        })\r\n\t\t},\r\n\t\t//提交改价\r\n\t\tsubmitChangePrice(){\r\n\t\t\tlet arrayListStr={\"priceInfo\": this.priceInfo, \"changeReason\":this.changeReason, userId : this.userId}\r\n\t\t\tlet datalist = {\r\n\t\t\t\t\"arrayListStr\": JSON.stringify(arrayListStr),\r\n\t\t\t\t\"changeReason\":this.changeReason,\r\n\t\t\t\t\"userId\":getStore('accountId'),\r\n\t\t\t};\r\n\t\t\tconsole.log(datalist);\r\n\t\t\tsaveBatchChaPriceData(datalist).then( res =>{\r\n\t\t\t\tthis.$router.go(-1);\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleChange(dataRow, type){\r\n\t\t\t//priceType表示1.公司定价-省区2.省区定价-地区、3.省区定价-县区、4.地区价、5.县区价\r\n\t\t\tlet priceType=1;\r\n\t\t\tlet oldPrice=1;\r\n\t\t\tlet newPrice=1;\r\n\t\t\tif(type == \"provincePrice\"){\r\n\t\t\t\tnewPrice = dataRow.provincePrice;\r\n\t\t\t\toldPrice = dataRow.oldProvincePrice;//老价格 fewPrice\r\n\t\t\t\tpriceType = 1 ;\r\n\t\t\t}else if(type == \"cityPrice\"){\r\n\t\t\t\tnewPrice = dataRow.cityPrice;\r\n\t\t\t\toldPrice = dataRow.oldCityPrice;//老价格\r\n\t\t\t\tpriceType = 2 ;\r\n\t\t\t}else{\r\n\t\t\t\t// newPrice = dataRow.countyPrice; //countyPrice\r\n\t\t\t\tnewPrice = dataRow.fewPrice; //countyPrice\r\n\t\t\t\toldPrice = dataRow.oldCountyPrice;//老价格\r\n\t\t\t\tpriceType = 3 ;\r\n\t\t\t}\r\n\t\t\tif(newPrice == \"oldPrice\"){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet priceInfo = {\r\n\t\t\t\t\"priceId\" : dataRow.priceId,// 省地县\r\n        \"newPrice\" : newPrice , // 新价格\r\n        \"oldPrice\" : oldPrice ,  // 老价格\r\n        \"userId\":this.userId,\r\n        \"goodsId\":dataRow.goodsId\r\n\r\n\t\t\t};\r\n      this.priceInfo=[];\r\n      console.log(priceInfo.goodsId);\r\n      if (priceInfo.goodsId in this.obj) {\r\n        console.log(this.obj);\r\n        console.log(priceInfo.goodsId);\r\n        console.log(this.obj[priceInfo.goodsId]);\r\n        if (priceInfo.priceType==1){\r\n          this.obj[priceInfo.goodsId][0] = priceInfo;\r\n        }else if (priceInfo.priceType==2){\r\n          this.obj[priceInfo.goodsId][1] = priceInfo;\r\n        } else if (priceInfo.priceType==3){\r\n          this.obj[priceInfo.goodsId][2] = priceInfo;\r\n        }\r\n      }else{\r\n        this.obj[priceInfo.goodsId]=[];\r\n        this.obj[priceInfo.goodsId][0]=priceInfo;\r\n        console.log(this.obj)\r\n      }\r\n      this.priceInfo.push(this.obj);\r\n      this.changPriceNum = this.priceInfo.length;\r\n      console.log(this.priceInfo);\r\n\t\t},\r\n\t\thandleInput2(e) {\r\n      // 通过正则过滤小数点后两位\r\n      e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\r\n         // e.target.value = (e.target.value.match( /^(\\d+|\\d+\\.\\d{0,1})$/g)[0]) || null\r\n      // dataRow.fewPrice=(dataRow.fewPrice-0).toFixed(2);\r\n      // console.log(dataRow.fewPrice);\r\n\r\n    },\r\n\r\n\t\t//修改个别区域价格\r\n\t\tchangePartPrice($id, $managerUserId){\r\n\t\t\tthis.$router.push({path:'/changePartPriceZB',query:{goodsId:$id, managerId: $managerUserId, userId: $managerUserId, searchCity: \"\", searchCounty: \"\"}});\r\n\t\t},\r\n\t\t//查看改价日志\r\n\t\tshowChangePriceLog($id, $position, $goodsId){\r\n\t\t\tlet logType = 0;\r\n\t\t\tthis.position==\"省区经理\" ? logType=1 : $position==\"地区经理\" ?  logType=2 : logType=3 ;//职位5=sheng 4=di 3=xian\r\n\t\t\tlet datalist ={\r\n\t\t\t\tpageIndex:1,\r\n\t\t\t\tpageSize:10,\r\n\t\t\t\tpriceId:$id,//商品价格表id\r\n\t\t\t\tgoodsId:$goodsId,//商品id\r\n\t\t\t\tmanagerId:this.managerUserId,//省区经理id\r\n\t\t\t\tuserId:this.userId,//省区、地区、县区id\r\n\t\t\t\tlogType:logType,  //1省区 2地区 3县区\r\n        areaCode:this.$route.query.areaCode // 经理所属区域\r\n\t\t\t}\r\n\t\t\tconsole.log(datalist);\r\n\t\t\tgetChangePriceLogData(datalist).then(res => {\r\n\t\t\t\tthis.changPriLogData= res.data.data\r\n\t\t\t\tthis.$refs.changePriceLog.dialogShow();\r\n\t\t\t})\r\n\t\t}\r\n    },\r\n\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped=\"scoped\">\r\n\r\n.infoDetail{\r\n\tpadding:20px 30px;\r\n\tborder-bottom:1px solid #ddd;\r\n\tspan{\r\n\t\tpadding-right:15px;\r\n\t\tfont-size:14px;\r\n\t\tcolor:#333;\r\n\t\tline-height:40px;\r\n\t}\r\n\tbackground:#fff;\r\n}\r\n.table_wrap{\r\n\tmargin:30px;\r\n\tpadding:20px;\r\n\tbackground:#fff;\r\n\tcolor:#666;\r\n\t.tableInput{\r\n\t    border-radius: 4px;\r\n\t    border: 1px solid #dcdfe6;\r\n\t    box-sizing: border-box;\r\n\t    height: 40px;\r\n\t    line-height: 40px;\r\n\t    padding: 0 15px;\r\n\t    width: 60%;\r\n\r\n\t}\r\n}\r\n.operateWraper {\r\n\t\tmargin: 20px;\r\n\t\ttext-align: center;\r\n\t\t.el-button-red {\r\n\t\t\tpadding: 0 0.5rem;\r\n\t\t}\r\n\r\n\t}\r\n.dialog_changePrice_reason{\r\n\tpadding:30px;\r\n\t.checkReason{\r\n\t\tborder:1px solid #e6e6e6;\r\n\t\tborder-radius:5px;\r\n\t\twidth:80%;\r\n\t\theight:70px;\r\n\t\tvertical-align: middle;\r\n\t\tpadding:10px;\r\n\t\tline-height:26px;\r\n\t}\r\n}\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/province/goodsManage/batChangePrice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('go-back',{attrs:{\"title\":\"改价\"}}),_vm._v(\" \"),_c('div',{staticClass:\"infoDetail\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('span',[_vm._v(_vm._s(_vm.areaName))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.areaManager))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.position))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"table_wrap\"},[_c('el-table',{ref:\"multipleTable\",attrs:{\"data\":_vm.tableData,\"border\":\"\",\"tooltip-effect\":\"dark\",\"max-height\":\"530\"}},[_c('el-table-column',{attrs:{\"prop\":\"goodsName\",\"label\":\"商品名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"specsMax\",\"label\":\"规格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"manufacturer\",\"label\":\"生产企业\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"drugType\",\"label\":\"剂型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"standPrice\",\"label\":\"公司标准价\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fixedPrice\",\"label\":\"省区定价\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fewPrice\",\"label\":\"价格\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(scope.row.fewPrice),expression:\"scope.row.fewPrice\",modifiers:{\"trim\":true}}],class:{'tableInput': true, 'color_red'\n                :scope.row.fixedPrice < scope.row.fewPrice, 'color_blue' : scope.row.fixedPrice > scope.row.fewPrice},attrs:{\"type\":\"number\"},domProps:{\"value\":(scope.row.fewPrice)},on:{\"change\":function($event){_vm.handleChange(scope.row,'countyPrice')},\"keydown\":_vm.handleInput2,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"fewPrice\", $event.target.value.trim())},\"blur\":function($event){_vm.$forceUpdate()}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operateBtn\",on:{\"click\":function($event){_vm.showChangePriceLog(scope.row.priceId, scope.row.position, scope.row.goodsId)}}},[_vm._v(\"改价日志\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"operateWraper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changPriceNum>0),expression:\"changPriceNum>0\"}],staticClass:\"div-inline el-button-red\",on:{\"click\":function($event){_vm.dialogReasonVisible=true}}},[_vm._v(\"提交改价\")])]),_vm._v(\" \"),_c('changePriceLog',{ref:\"changePriceLog\",attrs:{\"changPriLogData\":_vm.changPriLogData}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"改价原因\",\"visible\":_vm.dialogReasonVisible,\"append-to-body\":true,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.dialogReasonVisible=$event}}},[_c('div',{staticClass:\"dialog_body_content\"},[_c('div',{staticClass:\"dialog_changePrice_reason\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t改价原因：\\n\\t\\t\\t\\t\\t\"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.changeReason),expression:\"changeReason\"}],staticClass:\"checkReason\",attrs:{\"placeholder\":\"请填写改价原因\",\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.changeReason)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.changeReason=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changeReason==''),expression:\"changeReason==''\"}],staticClass:\"dialogDisaBtn\",attrs:{\"type\":\"danger\",\"disabled\":\"\"}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changeReason!=''),expression:\"changeReason!=''\"}],staticClass:\"dialog-sure-btn dialoperateBtn\",on:{\"click\":function($event){_vm.submitChangePrice()}}},[_vm._v(\"确定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-0dec9ed8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/province/goodsManage/batChangePrice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0dec9ed8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./batChangePrice.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./batChangePrice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./batChangePrice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0dec9ed8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./batChangePrice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0dec9ed8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/province/goodsManage/batChangePrice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}