webpackJsonp([21],{WsRF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("ROW2");var l=r("/hMw"),a=r("DMbw"),o={name:"uploadGoods",data:function(){return{ruleForm:{goodsName:"",materialCode:"",manufacturer:"",category:"",drugType:"",specsMin:"",specsMax:"",unit:"",version:"",licenseNumber:"",goodsImgs:""},manufacturerMenu:[],categoryMenu:[],drugTypeMenu:[],dialogHintVisible:!1,rules:{goodsName:[{required:!0,message:"请输入物料名称",trigger:"blur"}],materialCode:[{required:!0,message:"请输入物料编码",trigger:"blur"}],manufacturer:[{required:!0,message:"请选择生产企业",trigger:"change"}],drugType:[{required:!0,message:"请选择剂型",trigger:"change"}],specsMax:[{required:!0,message:"请输入规格",trigger:"blur"}],specsMin:[{required:!0,message:"请输入包装规格",trigger:"blur"}],category:[{required:!0,message:"请选择物料类别",trigger:"change"}],unit:[{required:!0,message:"请输入单位",trigger:"blur"}]}}},created:function(){this.init()},components:{uploadImg:l.a},inject:["reload"],methods:{init:function(){var e=this;Object(a.u)().then(function(t){e.manufacturerMenu=t.data.data}),Object(a.m)("").then(function(t){e.categoryMenu=t.data.data}),Object(a.A)("").then(function(t){e.drugTypeMenu=t.data.data})},uploadSuccess:function(e){console.log(e.fileName),this.ruleForm.goodsImgs=e.fileName.join(","),console.log(this.ruleForm.goodsImgs)},toSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log(e);var r=t.ruleForm;return console.log(r),""==r.goodsName.trim()?(alert("商品名称不能为空"),void(r.goodsName="")):""==r.materialCode.trim()?(alert("物料编码不能为空"),void(r.materialCode="")):""==r.specsMin.trim()?(alert("包装规格不能为空"),void(r.specsMin="")):""==r.specsMax.trim()?(alert("规格不能为空"),void(r.specsMax="")):""==r.unit.trim()?(alert("单位不能为空"),void(r.unit="")):void Object(a.F)(r).then(function(e){t.dialogHintVisible=!0})})},keepUploadImg:function(){this.reload()}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit_wraper"},[r("div",{staticClass:"containInfo_wraper"},[e._m(0),e._v(" "),r("div",{staticClass:"detail_content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,inline:!0,"label-width":"80px",rules:e.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"物料名称",prop:"goodsName"}},[r("el-input",{model:{value:e.ruleForm.goodsName,callback:function(t){e.$set(e.ruleForm,"goodsName",t)},expression:"ruleForm.goodsName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"物料编码",prop:"materialCode"}},[r("el-input",{model:{value:e.ruleForm.materialCode,callback:function(t){e.$set(e.ruleForm,"materialCode",t)},expression:"ruleForm.materialCode"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"生产企业",prop:"manufacturer"}},[r("el-select",{model:{value:e.ruleForm.manufacturer,callback:function(t){e.$set(e.ruleForm,"manufacturer",t)},expression:"ruleForm.manufacturer"}},e._l(e.manufacturerMenu,function(e,t,l){return r("el-option",{key:l,attrs:{label:e,value:t}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"剂型",prop:"drugType"}},[r("el-select",{model:{value:e.ruleForm.drugType,callback:function(t){e.$set(e.ruleForm,"drugType",t)},expression:"ruleForm.drugType"}},e._l(e.drugTypeMenu,function(e,t,l){return r("el-option",{key:l,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"规格",prop:"specsMax"}},[r("el-input",{model:{value:e.ruleForm.specsMax,callback:function(t){e.$set(e.ruleForm,"specsMax",t)},expression:"ruleForm.specsMax"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"包装规格",prop:"specsMin"}},[r("el-input",{model:{value:e.ruleForm.specsMin,callback:function(t){e.$set(e.ruleForm,"specsMin",t)},expression:"ruleForm.specsMin"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"物料类别",prop:"category"}},[r("el-select",{model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}},e._l(e.categoryMenu,function(e,t,l){return r("el-option",{key:l,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"批准文号"}},[r("el-input",{model:{value:e.ruleForm.licenseNumber,callback:function(t){e.$set(e.ruleForm,"licenseNumber",t)},expression:"ruleForm.licenseNumber"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"版本号"}},[r("el-input",{model:{value:e.ruleForm.version,callback:function(t){e.$set(e.ruleForm,"version",t)},expression:"ruleForm.version"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:2}},[r("div",{staticClass:"grid-content"},[r("span",{staticClass:"text-justify goodsImg_title"},[e._v("商品图片")])])]),e._v(" "),r("div",{staticClass:"div-inline uploadImg_box"},[r("upload-img",{attrs:{isInvert:!1,maxLimit:5,fileName:"goods"},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),r("span",{staticClass:"uploadImg_tip"},[e._v("请上传图片，最多上传5张")])],1),e._v(" "),r("div",{staticClass:"operateWraper"},[r("div",{staticClass:"div-inline el-button-red",on:{click:function(t){e.toSave("ruleForm")}}},[e._v("保存")])])],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"提示",visible:e.dialogHintVisible,"append-to-body":!0,width:"35%"},on:{"update:visible":function(t){e.dialogHintVisible=t}}},[r("div",{staticClass:"dialog_body_content"},[r("div",{staticClass:"prompText"},[e._v("恭喜您，商品上传成功!")])]),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("span",{staticClass:"dialog-sure-btn dialoperateBtn",on:{click:function(t){e.keepUploadImg("ruleForm")}}},[e._v("继续上传")])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"detail_title"},[t("i",{staticClass:"line_Icon"}),this._v("基本信息：")])}]};var i=r("C7Lr")(o,s,!1,function(e){r("YDYz"),r("gluU")},"data-v-f5577a36",null);t.default=i.exports},YDYz:function(e,t){},gluU:function(e,t){}});
//# sourceMappingURL=21.b9a25a9a51cb6a12f16b.js.map