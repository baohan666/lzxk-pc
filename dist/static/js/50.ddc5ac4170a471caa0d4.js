webpackJsonp([50],{UxtT:function(t,e){},hDjc:function(t,e,a){"use strict";a.d(e,"f",function(){return o}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return l}),a.d(e,"l",function(){return c}),a.d(e,"j",function(){return d}),a.d(e,"m",function(){return h}),a.d(e,"h",function(){return u}),a.d(e,"i",function(){return f}),a.d(e,"g",function(){return m}),a.d(e,"k",function(){return p}),a.d(e,"a",function(){return v}),a.d(e,"n",function(){return g}),a.d(e,"c",function(){return b}),a.d(e,"e",function(){return w});var n=a("lta2"),s=a("6iV/"),i=a.n(s),o=function(t){return n.a.get(n.a.baseURL+"accountInfo/getAccountInfoList",{params:t})},r=function(t){return n.a.get(n.a.baseURL+"accountInfo/deleteAccountInfo",{params:t})},l=function(t){return n.a.get(n.a.baseURL+"accountInfo/forOrStaAccountInfo",{params:t})},c=function(t){return n.a.get(n.a.baseURL+"role/selectRoleName")},d=function(t){return n.a.get(n.a.baseURL+"accountInfo/insertAccountInfo",{params:t})},h=function(t){return n.a.get(n.a.baseURL+"accountInfo/updateAccountInfo",{params:t})},u=function(t){return n.a.get(n.a.baseURL+"role/roleList",{params:t})},f=function(t){return n.a.get(n.a.baseURL+"menu/oneMenuList",{params:t})},m=function(t){return n.a.get(n.a.baseURL+"menu/nextMenuList",{params:t})},p=function(t){return n.a.post(n.a.baseURL+"role/insertRole",i.a.stringify(t))},v=function(t){return n.a.get(n.a.baseURL+"role/selectRoleById",{params:t})},g=function(t){return n.a.post(n.a.baseURL+"role/updateRole",i.a.stringify(t))},b=function(t){return n.a.get(n.a.baseURL+"role/deleteRole",{params:t})},w=function(t){return n.a.get(n.a.baseURL+"role/forOrStaRole",{params:t})}},q8Zt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a("3cXf"),i=a.n(s),o=a("hRKE"),r=a.n(o),l=a("HzJ8"),c=a.n(l),d=a("ZLEe"),h=a.n(d),u=a("a3Yh"),f=a.n(u),m=a("hDjc"),p={data:function(){var t;return t={checkBtnShow:!0,handleEditShow:!1,handleEditShowStatus:!1,loading:!0,dataTree:[],dataTreeCheck:[],defaultProps:{label:"name",children:"sub",isLeaf:"leaf"},props:{id:"id",children:"children",label:"menuName"},isAdd:!1,nextTree:[],subTree:[],delStatus:!0,input:"",statusAll:"",sel:"",totalRecords:0,totalPageCnt:0,pagin_show:!0,pageIndex:1,pageSize:10,checkedDept:[],departmentList:[],tableData:[],multipleSelection:[],select_cate:"",select_word:"",checkList:"",getSelOption:[],roleList:[],checkDeptArr:[],forOrStaMsg:"启用",is_search:!1,editVisible:!1,delVisible:!1,forOrStaVisible:!1,forbiddenBtnShow:!1,departmentId:[],twoMenu:[],form:{name:"",remark:"",status:"",departmentList:"",departmentId:[],oneMenu:[]},updateRoleJson:{id:"",name:"",remark:"",departmentId:"",oneMenu:[]},formJson:{name:"",remark:"",departmentId:"",oneMenu:[]}},f()(t,"twoMenu",[]),f()(t,"thrMenuS",[]),f()(t,"nextMenuS",[]),f()(t,"idDel",""),f()(t,"roleId",""),f()(t,"idx",-1),f()(t,"isStu",""),f()(t,"resourceData",[]),f()(t,"resourceDialogisShow",!1),f()(t,"resourceCheckedKey",[]),t},inject:["reload"],mounted:function(){this.getData(this.pageIndex,this.pageSize)},components:{elPagination:a("a9+l").a},methods:(n={getData:function(t,e,a){var n=this;Object(m.h)({pageIndex:t,pageSize:e,status:a}).then(function(t){var e=t.data.data;console.log(e),h()(e.dataList).length>0?(n.totalRecords=e.totalRecords,n.totalPageCnt=e.totalPageCnt,n.pageIndex=e.pageIndex,n.tableData=e.dataList,n.pagin_show=!0):(n.tableData=[],n.pagin_show=!1)})},formatterStatus:function(t,e){switch(t.status){case 0:return"删除";case 1:return"正常";case 2:return"禁用"}},updataPage:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.getData(this.pageIndex,this.pageSize,this.status)},addRole:function(){var t=this;this.form.name="",this.form.remark="",this.form.departmentList=[],this.formJson.oneMenu=[],this.isAdd=!1,this.handleEditShowStatus=!1,this.formJson.departmentId=[],Object(m.i)().then(function(e){t.dataTree=e.data.data.menuList,t.departmentList=e.data.data.departmentList,t.traversalDept(),t.loading=!1}),this.handleEditShow=!0},backBtn:function(){this.reload(),this.getData(this.pageIndex,this.pageSize,this.statusAll),this.handleEditShow=!1},handleEdit:function(t,e){var a=this;this.roleId=e.id,this.idx=t,this.form={name:e.name,remark:e.remark,status:e.status},this.resourceCheckedKey=[],this.departmentId=[],this.handleEditShowStatus=!0,Object(m.a)({id:e.id}).then(function(t){a.departmentList=t.data.data.departmentList,a.dataTreeCheck=t.data.data.permissionList,a.traversalDept(),a.traversalObject(a.dataTreeCheck)}),this.handleEditShow=!0},handleCheck:function(t,e){var a=this;this.isAdd=!0,this.roleId=e.id,this.form={name:e.name,remark:e.remark,status:e.status},Object(m.a)({id:e.id}).then(function(t){a.departmentList=t.data.data.departmentList,a.dataTreeCheck=t.data.data.permissionList,a.traversalDept(),a.traversalObject(a.dataTreeCheck),setTimeout(function(){a.traversalDisable(a.dataTreeCheck)},200),a.handleEditShow=!0}),this.handleEditShowStatus=!0,this.handleEditShow=!0,this.checkBtnShow=!1},traversalDept:function(){this.checkList=[];var t=!0,e=!1,a=void 0;try{for(var n,s=c()(this.departmentList);!(t=(n=s.next()).done);t=!0){var i=n.value;1==i.is_check&&this.checkList.push(i.id)}}catch(t){e=!0,a=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw a}}},traversalObject:function(t){for(var e in t){if("children"==e&&this.isArray(t[e])){var a=!0,n=!1,s=void 0;try{for(var i,o=c()(t[e]);!(a=(i=o.next()).done);a=!0){var l=i.value;l.check&&this.resourceCheckedKey.push(l.id)}}catch(t){n=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}}"object"==r()(t[e])&&(1==t.level&&1==t.check&&this.resourceCheckedKey.push(t.id),this.traversalObject(t[e]))}},traversalDisable:function(t){for(var e in t){if("children"==e&&this.isArray(t[e])){var a=!0,n=!1,s=void 0;try{for(var i,o=c()(t[e]);!(a=(i=o.next()).done);a=!0){i.value.disabled=!0}}catch(t){n=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}}"object"==r()(t[e])&&this.traversalDisable(t[e])}},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},updateRole:function(t){var e=this;Object(m.n)(t).then(function(t){e.reload(),e.$message.success("编辑角色成功")})},insertRole:function(t){var e=this;Object(m.k)(t).then(function(t){e.reload(),e.$message.success("创建角色成功")})},handleDelete:function(t,e){this.idDel=e.id,this.delVisible=!0},deleteRow:function(){var t=this;Object(m.c)({id:this.idDel}).then(function(e){t.getData(t.pageIndex,t.pageSize,t.statusAll)}),this.delVisible=!1},handleSelectionChange:function(t){this.multipleSelection=t},search:function(){console.log(this.pageIndex,this.pageSize,this.statusAll),this.getData(this.pageIndex,this.pageSize,this.statusAll)},handleCurrentChange:function(t){this.pageIndex=t,this.getData(this.pageIndex,this.pageSize,this.statusAll)},loadNode:function(t,e){var a=this;1===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t.data.data),t.data.data.forEach(function(t){1==t.isBtn&&(t.isleaf=!0)}),1==t.data.code&&setTimeout(function(){e(t.data.data)},200)}),2===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t.data.data),t.data.data.forEach(function(t){console.log(t.isBtn),1==t.isBtn&&(t.leaf=!0)}),setTimeout(function(){e(t.data.data)},200)}),3===t.level&&Object(m.g)({id:t.key}).then(function(t){a.isArray(t.data.data)?t.data.data.forEach(function(t){console.log(t.isBtn),1==t.isBtn&&(t.leaf=!0)}):t.data.data=[],setTimeout(function(){e(t.data.data)},200)}),4===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t),t.data.data.forEach(function(t){1==t.isBtn&&(t.leaf=!0)}),setTimeout(function(){e(t.data.data)},200)}),5===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t),t.data.data.forEach(function(t){1==t.Btn&&(t.leaf=!0)}),setTimeout(function(){e(t.data.data)},200)}),6===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t),t.data.data.forEach(function(t){1==t.isBtn&&(t.leaf=!0)}),setTimeout(function(){e(t.data.data)},200)}),7===t.level&&Object(m.g)({id:t.key}).then(function(t){console.log(t),t.data.data.forEach(function(t){1==t.isBtn&&(t.leaf=!0)}),setTimeout(function(){e(t.data.data)},200)})}},f()(n,"isArray",function(t){return"[object Array]"==Object.prototype.toString.call(t)}),f()(n,"saveEditRole",function(){var t=[],e=this.$refs.tree.getCheckedNodes(),a=this.$refs.treeCheck.getCheckedNodes();if(""==this.form.name)return alert("请输入角色名称"),!1;if(""==this.form.remark)return alert("请输入角色描述"),!1;if(0==this.checkList.length)return alert("请选择事业部"),!1;if(0==e.length&&0==a.length)return alert("请选择权限"),!1;if(this.handleEditShowStatus){var n=!0,s=!1,o=void 0;try{for(var r,l=c()(a);!(n=(r=l.next()).done);n=!0){var d=r.value;0==d.isBtn&&t.push(d)}}catch(t){s=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw o}}this.updateRoleJson.oneMenu=[],this.updateRoleJson.name=this.form.name,this.updateRoleJson.remark=this.form.remark,this.updateRoleJson.departmentId=this.checkList.toString(),this.updateRoleJson.id=this.roleId,this.updateRoleJson.oneMenu=t,this.updateRole({data:i()(this.updateRoleJson)})}else{this.formJson.oneMenu=[];var h=!0,u=!1,f=void 0;try{for(var m,p=c()(e);!(h=(m=p.next()).done);h=!0){var v=m.value;0==v.isBtn&&t.push(v)}}catch(t){u=!0,f=t}finally{try{!h&&p.return&&p.return()}finally{if(u)throw f}}this.formJson.oneMenu=t,this.formJson.name=this.form.name,this.formJson.remark=this.form.remark,this.formJson.departmentId=this.checkList.toString(),console.log(this.formJson),this.insertRole({data:i()(this.formJson)})}}),f()(n,"traversalObjectLeaf",function(t){for(var e in t){if("children"==e&&this.isArray(t[e])){var a=!0,n=!1,s=void 0;try{for(var i,o=c()(t[e]);!(a=(i=o.next()).done);a=!0){i.value.leaf=!0}}catch(t){n=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}}"object"==r()(t[e])&&this.traversalObject(t[e])}}),f()(n,"updateRole",function(t){var e=this;Object(m.n)(t).then(function(t){console.log(t),e.reload(),e.$message.success("编辑角色成功")})}),f()(n,"insertRole",function(t){var e=this;Object(m.k)(t).then(function(t){e.reload(),e.$message.success("创建角色成功")})}),f()(n,"handleDelete",function(t,e){this.idDel=e.id,this.delVisible=!0}),f()(n,"deleteRow",function(){var t=this;Object(m.c)({id:this.idDel}).then(function(e){1==e.data.code?t.getData(t.pageIndex,t.pageSize,t.statusAll):alert(e.data.msg)}),this.delVisible=!1}),f()(n,"handleSelectionChange",function(t){this.multipleSelection=t}),f()(n,"search",function(){this.getData(1,this.pageSize,this.statusAll)}),f()(n,"handleCurrentChange",function(t){this.pageIndex=t,this.getData(this.pageIndex,this.pageSize,this.statusAll)}),f()(n,"handleForOrSta",function(t,e){this.idDel=e.id,console.log(this.tableData[t]),1==e.status?this.forOrStaRow(2):this.forOrStaRow(1)}),f()(n,"forOrStaRow",function(t){var e=this;Object(m.e)({id:this.idDel,status:t}).then(function(t){e.getData(e.pageIndex,e.pageSize,e.statusAll)})}),n)},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.handleEditShow,expression:"!handleEditShow"}],attrs:{id:""}},[a("div",{staticClass:"search_wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("button",{staticClass:"el-button-red",on:{click:function(e){t.addRole()}}},[t._v("创建角色")]),t._v(" "),a("el-form-item",{attrs:{label:"账号状态:"}},[a("el-select",{attrs:{placeholder:"全部状态"},model:{value:t.statusAll,callback:function(e){t.statusAll=e},expression:"statusAll"}},[a("el-option",{attrs:{label:"全部状态",value:""}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"删除",value:"0"}}),t._v(" "),a("el-option",{key:"2",attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:"禁用",value:"2"}})],1)],1),t._v(" "),a("button",{staticClass:"el-button-red",on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":!0,label:"描述",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"账号数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",formatter:t.formatterStatus}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleCheck(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleForOrSta(e.$index,e.row)}}},[t._v(t._s(2==e.row.status?"解禁":"禁用"))]):t._e(),t._v(" "),0!=e.row.status?a("div",{staticClass:"operateBtn",on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,"append-to-body":!0,center:"",width:"30%"},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticStyle:{"text-align":"center","line-height":"100px"}},[a("span",[t._v("您确定要删除吗？")])]),t._v(" "),a("span",{attrs:{slot:"footer",calss:"dialog-footer"},slot:"footer"},[a("button",{staticClass:"el-button-red",on:{click:t.deleteRow}},[t._v("确定")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShow,expression:"handleEditShow"}],staticClass:"handleSeloShow"},[a("div",[a("span",{staticClass:"product_button",on:{click:t.backBtn}},[t._v("返回")])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"adminDetailBox"},[a("el-form",{ref:"form",staticStyle:{border:"1px solid red,"},attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShowStatus,expression:"handleEditShowStatus"}],attrs:{label:"状态:"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.form.status,expression:"form.status == 1"}],staticClass:"status"},[t._v("正常")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==t.form.status,expression:"form.status == 2"}],staticClass:"status"},[t._v("禁用")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==t.form.status,expression:"form.status == 0"}],staticClass:"status"},[t._v("删除")])]),t._v(" "),a("el-form-item",{attrs:{label:"角色描述:"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.remark,expression:"form.remark"}],staticClass:"addRoleRemark",attrs:{id:"editRoleRemark",type:"text",maxlength:"100"},domProps:{value:t.form.remark},on:{input:function(e){e.target.composing||t.$set(t.form,"remark",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"deptBox",attrs:{id:""}},[a("span",{staticClass:"dept"},[t._v("\n\t\t\t\t\t\t事业部：\n\t\t\t\t\t")]),t._v(" "),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.handleEditShowStatus,expression:"!handleEditShowStatus"}],model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.departmentList,function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.checkBtnShow&&t.handleEditShowStatus,expression:"!checkBtnShow && handleEditShowStatus"}],model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.departmentList,function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.id,disabled:""}},[t._v(t._s(e.name))])})),t._v(" "),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:t.checkBtnShow&&t.handleEditShowStatus,expression:"checkBtnShow && handleEditShowStatus"}],model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.departmentList,function(e){return a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.checkBtnShow,expression:"checkBtnShow"}],key:e.name,attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.handleEditShowStatus,expression:"!handleEditShowStatus"}],attrs:{label:"角色权限:"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tree",attrs:{data:t.dataTree,load:t.loadNode,props:t.defaultProps,"show-checkbox":"",lazy:"","node-key":"id","default-checked-keys":t.resourceCheckedKey}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.handleEditShowStatus,expression:"handleEditShowStatus"}],attrs:{label:"角色权限:"}},[a("el-tree",{ref:"treeCheck",attrs:{data:t.dataTreeCheck,"node-key":"id","show-checkbox":"",props:t.props,"default-checked-keys":t.resourceCheckedKey}})],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.checkBtnShow,expression:"checkBtnShow"}],staticClass:"adminDetailBox",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"product_button",on:{click:t.saveEditRole}},[t._v("确定")]),t._v(" "),a("span",{staticClass:"product_button",on:{click:function(e){t.handleEditShow=!1}}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"adminDetailBox"},[e("span",{staticClass:"adminDetailTitle"},[this._v("\n\t\t\t\t基本信息\n\t\t\t")])])}]};var g=a("C7Lr")(p,v,!1,function(t){a("UxtT")},"data-v-7c0dd26e",null);e.default=g.exports}});
//# sourceMappingURL=50.ddc5ac4170a471caa0d4.js.map