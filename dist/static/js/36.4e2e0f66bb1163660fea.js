webpackJsonp([36],{FWO6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=a("3cXf"),l=a.n(i),o=a("a3Yh"),c=a.n(o),d=a("eYXE"),s={data:function(){var t;return t={tableData:[],dialogAddVisible:!1,dialogEditVisible:!1,activeName:"second",title:"请选择需要配置销管审核范围的账号",saleName:""},c()(t,"activeName","name1"),c()(t,"gridAddList",[]),c()(t,"gridAddLeft",[]),c()(t,"gridAddRight",[]),c()(t,"multipleSelect_add",[]),c()(t,"gridData",[]),c()(t,"editList",[]),c()(t,"accountId",""),c()(t,"departMenulist",{}),c()(t,"gridDataList",[]),c()(t,"gridDataLeft",[]),c()(t,"gridDataRight",[]),c()(t,"multipleSelect_edit",[]),c()(t,"accountInfoIds",[]),c()(t,"departmentId",""),c()(t,"jsonArray",[]),c()(t,"noData",!1),t},inject:["reload"],created:function(){this.initData()},methods:(n={initData:function(){var t=this;Object(d.k)().then(function(e){var a=e.data.data;console.log(e.data),t.tableData=a})},addBtn:function(){var t=this;this.accountInfoIds=[],this.dialogAddVisible=!0,Object(d.e)("").then(function(e){t.gridAddList=e.data.data;var a=e.data.data,n=a.length;t.gridAddLeft=a.slice(0,Math.round(n/2)),t.gridAddRight=a.slice(Math.round(n/2),n)})},add_sure:function(){var t=this;if(0==this.accountInfoIds.length)return alert("请选择需要配置销管审核范围的账号"),!1;var e={str:this.accountInfoIds.toString()};Object(d.a)(e).then(function(e){if(console.log(e),1!=e.data.code)return t.$message.success(e.data.msg),!1;t.dialogAddVisible=!1,t.initData()})},editProvince:function(t){var e=this;this.title="编辑省区",this.saleName=t.name,this.dialogEditVisible=!0,this.accountId=t.accountId,Object(d.f)({accountId:t.accountId}).then(function(t){var a=t.data.data;e.editList=a.departmentList,e.getProinceByDeptId(e.editList[0].departmentId),e.departmentId="1"})},getProinceByDeptId:function(t){var e=this;Object(d.j)({departmentId:t,accountId:this.accountId}).then(function(t){e.gridData=t.data.data,e.$nextTick(function(){e.gridData.forEach(function(t,a){1==t.isChoose&&e.$refs.gridData.toggleRowSelection(e.gridData[a],!0)})})})},edit_sure:function(){var t=this;console.log(l()(this.accountInfoIds)),Object(d.c)({departmentId:this.departmentId,accountId:this.accountId,jsonArray:this.accountInfoIds.toString()}).then(function(e){t.dialogEditVisible=!1,t.reload(),t.$message.success("编辑成功")})},handleSelectionChange_add:function(t){var e=this;this.multipleSelect_add=t,t.forEach(function(t,a,n){e.accountInfoIds.push(t.accountId)}),console.log(this.accountInfoIds)},handleSelectionChange_edit:function(t){}},c()(n,"handleSelectionChange_edit",function(t){var e=this;this.accountInfoIds=[],t.forEach(function(t,a,n){e.accountInfoIds.push(t.provinceCode)}),console.log(this.accountInfoIds)}),c()(n,"isArray",function(t){return"[object Array]"==Object.prototype.toString.call(t)}),c()(n,"handleClick",function(t,e){this.accountInfoIds=[],this.getProinceByDeptId(this.editList[t.index].departmentId),this.departmentId=this.editList[t.index].departmentId}),c()(n,"checkSelectable",function(t,e){return 1!=t.status}),c()(n,"checkSelectable2",function(t,e){return 3!=t.status}),n)},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table_wrap"},[a("div",{staticClass:"div-inline el-button-red addBtn",on:{click:t.addBtn}},[t._v("新增")]),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogAddVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogAddVisible=e}}},[a("el-row",{staticClass:"table_merge"},[a("el-col",{attrs:{span:12}},[a("el-table",{staticClass:"table-left",attrs:{data:t.gridAddLeft,border:""},on:{"selection-change":t.handleSelectionChange_add}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"账号"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-table",{staticClass:"table-right",attrs:{data:t.gridAddRight,border:""},on:{"selection-change":t.handleSelectionChange_add}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"账号"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button-red",on:{click:t.add_sure}},[t._v("确定")])])],1),t._v(" "),a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable2}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"销管姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cloud",label:"云事业部"}}),t._v(" "),a("el-table-column",{attrs:{prop:"arthritis",label:"风湿事业部"}}),t._v(" "),a("el-table-column",{attrs:{prop:"heartBrain",label:"心脑事业部"}}),t._v(" "),a("el-table-column",{attrs:{prop:"digestion",label:"消化事业部"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.editProvince(e.row)}}},[t._v("编辑省区")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogEditVisible,"append-to-body":!0,center:"",width:"40%"},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[a("div",{staticClass:"editProvince_xiaoguan"},[t._v("\n\t\t\t销管："+t._s(t.saleName)+"\n\t\t")]),t._v(" "),a("el-tabs",{staticClass:"editProvince_dept",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.editList,function(t,e,n){return a("el-tab-pane",{key:t.departmentId,attrs:{label:t.departmentName}})})),t._v(" "),a("el-row",{staticClass:"table_merge"},[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"gridData",staticClass:"table-left",attrs:{data:t.gridData,border:""},on:{"selection-change":t.handleSelectionChange_edit}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable2}}),t._v(" "),a("el-table-column",{attrs:{prop:"provinceName",label:"省区名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"provinceManager",label:"省区经理姓名"}})],1)],1),t._v(" "),0==t.gridData.length?a("el-col",{attrs:{span:24}},[a("div",{staticClass:"noData"},[t._v("暂无数据")])]):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button-red",on:{click:t.edit_sure}},[t._v("确定")])])],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(s,r,!1,function(t){a("tB+n"),a("SG1E")},"data-v-15a312e8",null);e.default=u.exports},SG1E:function(t,e){},"tB+n":function(t,e){}});
//# sourceMappingURL=36.4e2e0f66bb1163660fea.js.map