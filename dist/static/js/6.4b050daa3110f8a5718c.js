webpackJsonp([6],{"6i7p":function(e,t){},MoFU:function(e,t){},"OLL+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),i=a.n(l),o=a("Agyp"),s=a("zY1m"),n=a("gFbb"),r=a("V+BW"),c=a("/hMw"),u=a("xQKn"),d={name:"uploadGoods",data:function(){return{bill:"bill",getProvince:"",getCounty:"",getCity:"",ruleForm:{address:{provinceCode:"",cityCode:"",countyCode:"",provinceName:"",cityName:"",countyName:""},bill:{id:"",company:"",customerCode:"",customerType2:"",taxpayerCode:"",phoneOne:"",phoneTwo:"",bossName:"",companyAddress:""},bankAccount:[{accountNumber:"",accountName:"",depositBank:"",accountType:"",number:""}],qualificationInfo:[],numberSign:"1"},rules:{address:{countyCode:[{required:!0,message:"请选择地区",trigger:"blur"}]},bill:{companyAddress:[{required:!0,message:"请输企业地址",trigger:"change"}],company:[{required:!0,message:"请输入商业公司名称",trigger:"blur"}],customerCode:[{required:!0,message:"请输入客户编码",trigger:"blur"}],customerType2:[{required:!0,message:"请选择客户基本分类",trigger:"change"}],taxpayerCode:[{required:!0,message:"请输入纳税人登记号",trigger:"blur"}],bossName:[{required:!0,message:"请输入法人代表",trigger:"blur"}],phoneOne:[{required:!0,message:"请输入电话1",trigger:"blur"}],accountNumber:[{required:!0,message:"请输入账号",trigger:"blur"}],annualReport:[{required:!0,message:"请输入企业年报",trigger:"blur"}]}},imgList:[],dialogAddVisible:!1,dialogUploadVisible:!1,operate_index:0,dialogAddlist:[{code:"",id:"",typeName:""}],loading:!1,options:[]}},mounted:function(){this.init()},components:{goBack:o.a,uploadImg:c.a,addressPlugin:n.a,myAccount:r.a,datepicker:s.a},methods:{init:function(){var e=this;if(this.$route.query.id)return Object(u.s)({billId:this.$route.query.id}).then(function(t){var a=t.data.data;e.ruleForm.address.companyName=a.bill.companyAddress,e.ruleForm.bill=a.bill,e.ruleForm.bankAccount=a.bankAccount;for(var l=0;l<a.bankAccount.length;l++)if("1"==a.bankAccount[l].isDefault2){e.ruleForm.numberSign=l+1;break}e.ruleForm.qualificationInfo=a.qualificationInfo,e.getAddress=a.bill,e.getProvince=a.bill.provinceCode,e.getCounty=a.bill.countyCode,e.getCity=a.bill.cityCode,e.ruleForm.address.provinceCode=a.bill.provinceCode,e.ruleForm.address.cityCode=a.bill.cityCode,e.ruleForm.address.countyCode=a.bill.countyCode,e.ruleForm.address.provinceName=a.bill.provinceName,e.ruleForm.address.cityName=a.bill.cityName,e.ruleForm.address.countyName=a.bill.countyName}),!1},seleSuccess:function(e){this.ruleForm.address.provinceCode=e.provinceCode,this.ruleForm.address.cityCode=e.cityCode,this.ruleForm.address.countyCode=e.countyCode,this.ruleForm.address.provinceName=e.provinceName,this.ruleForm.address.cityName=e.cityName,this.ruleForm.address.countyName=e.countyName},toAddAccount:function(){this.ruleForm.bankAccount.push({accountNumber:"",accountName:"",depositBank:"",accountType2:"",isDefault:""})},delAccount:function(e){console.log("this.ruleForm.bankAccount:",this.ruleForm.bankAccount),this.ruleForm.bankAccount.splice(e,1),this.ruleForm.numberSign=1,console.log("删除账户:",e)},toSave_addBC:function(e){var t=this;this.$refs.accountInfo.forEach(function(e,a,l){t.$refs.accountInfo[a].toExamin()}),this.$refs[e].validate(function(e){if(!e)return t.$message.success("请将必填项填写完整！"),!1;var a=t.ruleForm.bill.company,l=t.ruleForm.bill.id;Object(u.c)({companyName:a,billId:l}).then(function(e){if(e.data.code=1){var a={businessCompany:i()(t.ruleForm)};Object(u.q)(a).then(function(e){t.$router.go(-1)})}})})},changeSelect:function(e,t,a){"validDate"==a?this.ruleForm.qualificationInfo[t].validDate=e.data:this.ruleForm.qualificationInfo[t].issueDate=e.data},add_btn:function(){var e={code:"",id:"",typeName:""};this.dialogAddlist.push(e),this.options.push(e)},remoteMethod:function(e,t){var a=this;""!==e?(this.loading=!0,Object(u.n)({typeName:e}).then(function(e){a.loading=!1,a.options[t]=e.data.data})):this.options[t]={}},currentSel:function(e,t){this.dialogAddlist[t]=e},delete_btn:function(e){this.dialogAddlist.length>1&&(this.dialogAddlist.splice(e,1),this.options.splice(e,1))},add_sure:function(){this.dialogAddVisible=!1;var e="";this.dialogAddlist.forEach(function(t,a,l){""!=t.id&&(e+=t.id+",")}),this.ruleForm.qualificationInfo[this.operate_index].businessRange=e},uploadSuccess:function(e){this.ruleForm.qualificationInfo.customDetai+=e.fileName+","},upload_sure:function(){this.dialogUploadVisible=!1}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"creatBusiCompany"},[a("go-back",{attrs:{title:"编辑商业公司"}}),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,inline:!0,rules:e.rules}},[a("div",{staticClass:"containInfo_wraper"},[a("div",{staticClass:"detail_title"},[a("i",{staticClass:"line_Icon"}),e._v("基本信息：")]),e._v(" "),a("div",{staticClass:"detail_content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"客户编码：",prop:"bill.customerCode"}},[a("el-input",{attrs:{placeholder:"请输入客户编码"},model:{value:e.ruleForm.bill.customerCode,callback:function(t){e.$set(e.ruleForm.bill,"customerCode",t)},expression:"ruleForm.bill.customerCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"商业公司名称：",prop:"bill.company"}},[a("el-input",{attrs:{placeholder:"请输入商业公司名称"},model:{value:e.ruleForm.bill.company,callback:function(t){e.$set(e.ruleForm.bill,"company",t)},expression:"ruleForm.bill.company"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"客户基本分类：",prop:"bill.customerType2"}},[a("el-select",{attrs:{placeholder:"请选择客户分类"},model:{value:e.ruleForm.bill.customerType2,callback:function(t){e.$set(e.ruleForm.bill,"customerType2",t)},expression:"ruleForm.bill.customerType2"}},[a("el-option",{key:"1",attrs:{label:"GSP商业用户",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"自然人",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"非药品经营客户",value:"3"}}),e._v(" "),a("el-option",{key:"4",attrs:{label:"医疗终端客户",value:"4"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"所在地区：",prop:"bill.drugType"}},[a("address-plugin",{attrs:{getProvince:e.getProvince,getCounty:e.getCounty,getCity:e.getCity,required:"false"},on:{seleSuccess:e.seleSuccess}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"企业地址：",prop:"bill.companyAddress"}},[a("el-input",{attrs:{placeholder:"请输入企业地址"},model:{value:e.ruleForm.bill.companyAddress,callback:function(t){e.$set(e.ruleForm.bill,"companyAddress",t)},expression:"ruleForm.bill.companyAddress"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"纳税人登记号：",prop:"bill.taxpayerCode"}},[a("el-input",{attrs:{placeholder:"请输入纳税人登记号"},model:{value:e.ruleForm.bill.taxpayerCode,callback:function(t){e.$set(e.ruleForm.bill,"taxpayerCode",t)},expression:"ruleForm.bill.taxpayerCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"法人代表：",prop:"bill.bossName"}},[a("el-input",{attrs:{placeholder:"请输入法人代表"},model:{value:e.ruleForm.bill.bossName,callback:function(t){e.$set(e.ruleForm.bill,"bossName",t)},expression:"ruleForm.bill.bossName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"企业年报：",prop:"bill.annualReport"}},[a("el-input",{attrs:{placeholder:"请输入企业年报"},model:{value:e.ruleForm.bill.annualReport,callback:function(t){e.$set(e.ruleForm.bill,"annualReport",t)},expression:"ruleForm.bill.annualReport"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"电话1：",prop:"bill.phoneOne"}},[a("el-input",{attrs:{type:"tel",placeholder:"请输入电话1"},model:{value:e.ruleForm.bill.phoneOne,callback:function(t){e.$set(e.ruleForm.bill,"phoneOne",t)},expression:"ruleForm.bill.phoneOne"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"电话2："}},[a("el-input",{attrs:{type:"tel",placeholder:"请输入电话2"},model:{value:e.ruleForm.bill.phoneTwo,callback:function(t){e.$set(e.ruleForm.bill,"phoneTwo",t)},expression:"ruleForm.bill.phoneTwo"}})],1)],1)],1)],1)])]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.ruleForm,inline:!0}},[a("div",{staticClass:"containInfo_wraper"},[a("div",{staticClass:"detail_title"},[a("i",{staticClass:"line_Icon"}),e._v("账户信息：")]),e._v(" "),a("el-radio-group",{model:{value:e.ruleForm.numberSign,callback:function(t){e.$set(e.ruleForm,"numberSign",t)},expression:"ruleForm.numberSign"}},e._l(e.ruleForm.bankAccount,function(t,l){return a("div",{key:l,staticClass:"detail_content"},[a("div",{staticClass:"account_block_title"},[e._v("\n              账户"+e._s(l+1)+"\n              "),e.ruleForm.numberSign!=l+1?a("span",{staticClass:"marginL30"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini",round:""},on:{click:function(t){e.delAccount(l)}}},[e._v("删除")])],1):e._e()]),e._v(" "),a("my-account",{ref:"accountInfo",refInFor:!0,attrs:{datalist:t,getIndex:l+1}})],1)})),e._v(" "),a("div",{staticClass:"el-button-blue",on:{click:function(t){e.toAddAccount()}}},[e._v("+添加账户")])],1)]),e._v(" "),a("div",{staticClass:"containInfo_wraper"},[e._m(0),e._v(" "),a("div",{staticClass:"detail_content qualifiInfo_wraper"},[a("div",{staticClass:"qualifiInfo_table"},[a("el-row",[a("el-col",{attrs:{span:4}},[e._v("资质名称")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("i",{staticClass:"requireStar"},[e._v("*")]),e._v("证照编码")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("颁发机构")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("颁发日期")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("i",{staticClass:"requireStar"},[e._v("*")]),e._v("有效期至")]),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("经营范围")]),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("附件")])],1),e._v(" "),e._l(e.ruleForm.qualificationInfo,function(t,l){return a("el-row",{key:l},[a("el-col",{attrs:{span:4}},["营业执照"==t.qualificationName||"药品经营许可证"==t.qualificationName||"GSP认证证书"==t.qualificationName?a("i",{staticClass:"requireStar"},[e._v("*")]):e._e(),e._v("\n              "+e._s(t.qualificationName)+"\n            ")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入证照编码",prop:"infoList.licenseCode"},model:{value:t.licenseCode,callback:function(a){e.$set(t,"licenseCode",a)},expression:"item.licenseCode"}},["营业执照"==t.qualificationName||"药品经营许可证"==t.qualificationName||"GSP认证证书"==t.qualificationName?a("template",{slot:"prepend"},[e._v("\n                  *必填\n                ")]):e._e()],2)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入颁发机构"},model:{value:t.issueOrganization,callback:function(a){e.$set(t,"issueOrganization",a)},expression:"item.issueOrganization"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("datepicker",{staticClass:"div-inline effectiveDate",attrs:{"value-format":"yyyy-MM-dd",starTim:t.issueDate,startIsShow:"true"},on:{changeSelect:function(t){e.changeSelect(t,l,"issueDate")}}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"el-input el-input-group",class:"营业执照"==t.qualificationName||"药品经营许可证"==t.qualificationName||"GSP认证证书"==t.qualificationName?"el-input-group--prepend":""},["营业执照"==t.qualificationName||"药品经营许可证"==t.qualificationName||"GSP认证证书"==t.qualificationName?a("div",{staticClass:"el-input-group__prepend"},[e._v("\n                  *必填\n                ")]):e._e(),e._v(" "),a("datepicker",{staticClass:"div-inline effectiveDate",attrs:{"value-format":"yyyy-MM-dd",starTim:t.validDate,startIsShow:"true"},on:{changeSelect:function(t){e.changeSelect(t,l,"validDate")}}})],1)]),e._v(" "),a("el-col",{attrs:{span:2}},["药品经营许可证"==t.qualificationName?a("i",{staticClass:"requireStar"},[e._v("*")]):e._e(),e._v(" "),t.businessRange?a("span",{staticClass:"operateBtn",on:{click:function(a){e.dialogAddVisible=!0,e.operate_index=l,e.dialogAddlist=t.list}}},[e._v("编辑")]):a("span",{staticClass:"operateBtn",on:{click:function(t){e.dialogAddVisible=!0,e.operate_index=l}}},[e._v("添加")])]),e._v(" "),a("el-col",{attrs:{span:2}},[t.accessory?a("span",{staticClass:"operateBtn",on:{click:function(a){e.dialogUploadVisible=!0,e.operate_index=l,e.imgList=t.imgList}}},[e._v("编辑")]):a("span",{staticClass:"operateBtn",on:{click:function(t){e.dialogUploadVisible=!0,e.operate_index=l}}},[e._v("上传")])])],1)})],2)])]),e._v(" "),a("div",{staticClass:"operateWraper"},[a("div",{staticClass:"div-inline el-button-red",on:{click:function(t){e.toSave_addBC("ruleForm")}}},[e._v("保存")])]),e._v(" "),a("el-dialog",{attrs:{title:"添加经营范围",visible:e.dialogAddVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("div",{staticClass:"dialog_body_title"},[a("span",{staticClass:"textTip"},[e._v("药品经营许可证")]),e._v(" "),a("span",{staticClass:"diolog_add_btn",on:{click:e.add_btn}},[e._v("新增")])]),e._v(" "),a("div",{staticClass:"dialog_body_content"},[a("div",{staticClass:"qualifiInfo_table"},[a("el-row",[a("el-col",{attrs:{span:9}},[e._v("名称")]),e._v(" "),a("el-col",{attrs:{span:9}},[e._v("编码")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("操作")])],1),e._v(" "),e._l(e.dialogAddlist,function(t,l){return a("el-row",{key:l},[a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入药品关键词","remote-method":function(t){e.remoteMethod(t,l)},loading:e.loading},on:{change:function(t){e.currentSel(t,l)}},model:{value:t.typeName,callback:function(a){e.$set(t,"typeName",a)},expression:"item.typeName"}},e._l(e.options[l],function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:9}},[e._v(e._s(t.code))]),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"operateBtn",on:{click:function(t){e.delete_btn(l)}}},[e._v("删除")])])],1)})],2)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialog-cancel-btn dialoPerateBtn",on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("span",{staticClass:"dialog-sure-btn dialoPerateBtn",on:{click:e.add_sure}},[e._v("确定")])])]),e._v(" "),a("el-dialog",{attrs:{title:"附件上传",visible:e.dialogUploadVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("div",{staticClass:"dialog_body_content"},[a("span",{staticClass:"tipInfo"},[e._v("请上传图片，最多上传5张")]),e._v(" "),a("upload-img",{attrs:{maxLimit:5,fileName:e.bill,imgMenu:e.imgList,isInvert:!0},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialog-cancel-btn dialoPerateBtn",on:{click:function(t){e.dialogUploadVisible=!1}}},[e._v("取消")]),e._v(" "),a("span",{staticClass:"dialog-sure-btn dialoPerateBtn",on:{click:e.upload_sure}},[e._v("确定")])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"detail_title"},[t("i",{staticClass:"line_Icon"}),this._v("资质信息：")])}]};var m=a("C7Lr")(d,p,!1,function(e){a("6i7p"),a("sTgY")},"data-v-6a7f141c",null);t.default=m.exports},"V+BW":function(e,t,a){"use strict";var l={props:{datalist:{type:Object},getIndex:{type:Number},isDefault2:{type:Number}},data:function(){return{item:this.$props.datalist,accountRules:{accountNumber:[{required:!0,message:"请输入账号",trigger:"blur"}],accountName:[{required:!0,message:"请输入户名",trigger:"blur"}],depositBank:[{required:!0,message:"请输入开户行",trigger:"blur"}],accountType2:[{required:!0,message:"请选择账户类型",trigger:"change"}]}}},watch:{datalist:function(e){this.item=e,console.log(e)}},computed:{},created:function(){this.changeIndex()},methods:{changeIndex:function(){this.item.number=this.$props.getIndex},toExamin:function(){this.item;this.$refs.accountRules.validate(function(e){})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"accountRules",staticClass:"demo-form-inline",attrs:{model:e.item,inline:!0,rules:e.accountRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"账号：",prop:"accountNumber"}},[a("el-input",{directives:[{name:"vue-onkeypress",rawName:"v-vue-onkeypress"}],attrs:{placeholder:"请输入账号"},model:{value:e.item.accountNumber,callback:function(t){e.$set(e.item,"accountNumber",t)},expression:"item.accountNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"户名：",prop:"accountName"}},[a("el-input",{attrs:{placeholder:"请输入户名"},model:{value:e.item.accountName,callback:function(t){e.$set(e.item,"accountName",t)},expression:"item.accountName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"开户银行：",prop:"depositBank"}},[a("el-input",{directives:[{name:"vue-onkeypress",rawName:"v-vue-onkeypress"}],attrs:{placeholder:"请输入开户银行"},model:{value:e.item.depositBank,callback:function(t){e.$set(e.item,"depositBank",t)},expression:"item.depositBank"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"账户性质：",prop:"accountType2"}},[a("el-select",{attrs:{placeholder:"请选择账户性质"},model:{value:e.item.accountType2,callback:function(t){e.$set(e.item,"accountType2",t)},expression:"item.accountType2"}},[a("el-option",{key:"1",attrs:{label:"公司",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"个人",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{class:1==e.getIndex?"is-required":"",attrs:{label:"默认："}},[a("el-radio",{attrs:{label:e.getIndex}},[e._v(" ")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(l,i,!1,function(e){a("MoFU")},"data-v-c3209452",null);t.a=o.exports},sTgY:function(e,t){}});
//# sourceMappingURL=6.4b050daa3110f8a5718c.js.map