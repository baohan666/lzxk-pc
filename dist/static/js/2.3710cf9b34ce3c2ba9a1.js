webpackJsonp([2],{"1J5t":function(t,e,a){a("Gquc"),a("IsPG"),a("A1pn"),a("oltR"),a("V7Pz"),a("DG01"),a("toDE"),t.exports=a("AKd3").Set},"27tL":function(t,e,a){var i=a("8Nvm");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},"4HpA":function(t,e,a){"use strict";var i=a("C02x"),o=a("FITv"),n=a("DVkV"),r=a("BRDz"),l=a("bHZz"),s=a("bodH"),c=a("k/7E"),d=a("t8DS"),u=a("8Nvm"),p=a("XAI7"),v=a("lIiZ").f,h=a("A+MN")(0),g=a("sjnA");t.exports=function(t,e,a,f,_,b){var m=i[t],y=m,I=_?"set":"add",w=y&&y.prototype,x={};return g&&"function"==typeof y&&(b||w.forEach&&!r(function(){(new y).entries().next()}))?(y=e(function(e,a){d(e,y,t,"_c"),e._c=new m,void 0!=a&&c(a,_,e[I],e)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!b||"clear"!=t)&&l(y.prototype,t,function(a,i){if(d(this,y,t),!e&&b&&!u(a))return"get"==t&&void 0;var o=this._c[t](0===a?0:a,i);return e?this:o})}),b||v(y.prototype,"size",{get:function(){return this._c.size}})):(y=f.getConstructor(e,t,_,I),s(y.prototype,a),n.NEED=!0),p(y,t),x[t]=y,o(o.G+o.W+o.F,x),b||f.setStrong(y,t,_),y}},"A+MN":function(t,e,a){var i=a("WwGG"),o=a("mEMm"),n=a("OXaN"),r=a("CFGK"),l=a("dC2g");t.exports=function(t,e){var a=1==t,s=2==t,c=3==t,d=4==t,u=6==t,p=5==t||u,v=e||l;return function(e,l,h){for(var g,f,_=n(e),b=o(_),m=i(l,h,3),y=r(b.length),I=0,w=a?v(e,y):s?v(e,0):void 0;y>I;I++)if((p||I in b)&&(f=m(g=b[I],I,_),t))if(a)w[I]=f;else if(f)switch(t){case 3:return!0;case 5:return g;case 6:return I;case 2:w.push(g)}else if(d)return!1;return u?-1:c||d?d:w}}},DG01:function(t,e,a){a("vyS5")("Set")},MxwP:function(t,e,a){"use strict";var i=a("lIiZ").f,o=a("c1o2"),n=a("bodH"),r=a("WwGG"),l=a("t8DS"),s=a("k/7E"),c=a("uH+j"),d=a("z7iO"),u=a("4BpY"),p=a("sjnA"),v=a("DVkV").fastKey,h=a("27tL"),g=p?"_s":"size",f=function(t,e){var a,i=v(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,c){var d=t(function(t,i){l(t,d,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&s(i,a,t[c],t)});return n(d.prototype,{clear:function(){for(var t=h(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var a=h(this,e),i=f(a,t);if(i){var o=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=o),o&&(o.p=n),a._f==i&&(a._f=o),a._l==i&&(a._l=n),a[g]--}return!!i},forEach:function(t){h(this,e);for(var a,i=r(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(i(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!f(h(this,e),t)}}),p&&i(d.prototype,"size",{get:function(){return h(this,e)[g]}}),d},def:function(t,e,a){var i,o,n=f(t,e);return n?n.v=a:(t._l=n={i:o=v(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[g]++,"F"!==o&&(t._i[o]=n)),t},getEntry:f,setStrong:function(t,e,a){c(t,e,function(t,a){this._t=h(t,e),this._k=a,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?d(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,d(1))},a?"entries":"values",!a,!0),u(e)}}},Oyrx:function(t,e,a){var i=a("adiS"),o=a("vhYp");t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},SMmX:function(t,e,a){"use strict";var i=a("FITv"),o=a("7p3N"),n=a("WwGG"),r=a("k/7E");t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,l,s=arguments[1];return o(this),(e=void 0!==s)&&o(s),void 0==t?new this:(a=[],e?(i=0,l=n(s,arguments[2],2),r(t,!1,function(t){a.push(l(t,i++))})):r(t,!1,a.push,a),new this(a))}})}},V7Pz:function(t,e,a){var i=a("FITv");i(i.P+i.R,"Set",{toJSON:a("Oyrx")("Set")})},b4tm:function(t,e,a){var i=a("8Nvm"),o=a("JBI7"),n=a("biYF")("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[n])&&(e=void 0)),void 0===e?Array:e}},dC2g:function(t,e,a){var i=a("b4tm");t.exports=function(t,e){return new(i(t))(e)}},g4M9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ZLEe"),o=a.n(i),n=a("zsLt"),r=a.n(n),l=a("kfHR"),s=a.n(l),c=a("XH94"),d=a("a9+l"),u=a("ROW2"),p=a("Xrov"),v=a("cW/P"),h={data:function(){return{goodsName:"",radioActive:1,depId:"0",category:"0",categoryMenu:[],userName:"",areaName:"",tableData:[],totalRecords:0,totalPageCnt:0,pageIndex:1,pageSize:10,pagin_show:!0,changPriLogData:[],multipleSelection:[],fication:1,dialogAllotVisible:!1,dialogAllotVisible_A:!1,inputVal_1:0,inputVal_2:0,inputVal_3:0,inputVal_4:0,textarea:"",detailsArr:[],condition:"请输入查询条件"}},created:function(){var t=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(t)},components:{departComponet:c.a,elPagination:d.a,changePriceLog:p.a},methods:{changeHandler:function(t,e){this.tableData=[];var a=this.getsearchInfo(1,this.pageSize);console.log(a),this.condition="请输入查询条件",1!=t&&1!=e||(""!=this.userName||""!=this.areaName||1==t?(this.condition="暂无数据",this.initData(a)):alert("请输入经理名称或者所在区域")),this.fication=t,console.log(t)},initData:function(t){var e=this;console.log(this.radioActive),1==this.radioActive?(console.log(Object(u.b)("accountId")),Object(v.t)(t).then(function(t){if(1==t.data.code){var a=t.data.data;a.dataList.length>0?(e.totalRecords=a.totalRecords,e.totalPageCnt=a.totalPageCnt,e.pageIndex=a.pageIndex,e.tableData=a.dataList,e.pagin_show=!0):(e.tableData=[],e.pagin_show=!1)}else e.pagin_show=!1})):(console.log(t),Object(v.s)(t).then(function(t){if(1==t.data.code){var a=t.data.data;a.dataList.length>0?(e.totalRecords=a.totalRecords,e.totalPageCnt=a.totalPageCnt,e.pageIndex=a.pageIndex,e.tableData=a.dataList,e.pagin_show=!0):(e.tableData=[],e.pagin_show=!1)}else e.pagin_show=!1}))},batchChangePrice:function(){console.log(this.multipleSelection);var t=[],e=[];this.multipleSelection.forEach(function(a,i,o){t.push(a.areaCode),e.push(a.priceId)}),1==(t=s()(new r.a(t))).length?(console.log({areaCode:t[0],priceId:e.join(",")}),this.$router.push({path:"batChangeSQ",query:{areaCode:t[0],priceId:e.join(",")}})):t.length>1?this.$message.success("请选择相同区域的商品"):this.$message.success("请选择需要改价的商品")},getsearchInfo:function(t,e){console.log(this.radioActive);return 1==this.radioActive?{pageIndex:t,pageSize:e,goodsName:this.goodsName,category:this.category,depId:this.depId,userId:Object(u.b)("accountId")}:{pageIndex:t,pageSize:e,goodsName:this.goodsName,category:this.category,userName:this.userName,depId:this.depId,areaName:this.areaName,userId:Object(u.b)("accountId")}},ImportPrice:function(){},changePrice:function(t,e,a,i){var o=Object(u.b)("accountId");if(console.log(t,e,o),1==this.radioActive)if(1==a){null==t&&(t=0);var n={priceId:t,goodsId:e,userId:o,subSearchName:this.goodsName};this.dialogAllotVisible=!0,this.initData_sheng(n)}else this.$router.push({path:"/changePriceSQ",query:{priceId:t,goodsId:e,userId:o,subSearchName:this.goodsName}});else console.log({priceId:t,goodsId:e,userId:o,subSearchName:this.goodsName,areaCode:i}),this.$router.push({path:"/batChangeSQ",query:{priceId:t,goodsId:e,userId:o,subSearchName:this.goodsName,areaCode:i}})},getCategory:function(){var t=this;if(o()(this.categoryMenu).length>0)return!1;Object(v.h)("").then(function(e){t.categoryMenu=e.data.data})},selectSuccess:function(t){this.depId=t},handleSelectionChange:function(t){this.multipleSelection=t},updataPage:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize;var e=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(e)},initData_sheng:function(t){var e=this;Object(v.i)(t).then(function(t){console.log(t.data.data),e.detailsArr=t.data.data,e.inputVal_1=t.data.data.cityFiexed,e.inputVal_2=t.data.data.countyFiexed,e.inputVal_3=t.data.data.cityFiexed,e.inputVal_4=t.data.data.countyFiexed})},inputOnlyOnePoint:function(t){1==t?this.inputVal_1=(this.inputVal_1-0).toFixed(2):this.inputVal_2=(this.inputVal_2-0).toFixed(2)},showChangePriceLog:function(t,e,a,i){var o=this,n=0;console.log(a),n="地区经理"==e?2:3,null==t&&(t=0);var r={pageIndex:1,pageSize:10,priceId:t,goodsId:i,userId:a,logType:n};console.log(r),Object(v.k)(r).then(function(t){o.changPriLogData=t.data.data,console.log(o.changPriLogData),o.$refs.changePriceLog.dialogShow()})},Submission:function(){var t=this;if(""!=this.textarea){var e={userId:Object(u.b)("accountId"),priceId:this.detailsArr.priceId,reason:this.textarea,priceInfo:'[{"priceType":"2","oldPrice":'+this.inputVal_3+',"newPrice":'+this.inputVal_1+'},{"priceType":"3","oldPrice":'+this.inputVal_4+',"newPrice":'+this.inputVal_2+"}]"};console.log(e.priceId),null==e.priceId&&(e.priceId=0),console.log(e),Object(v.j)(e).then(function(e){console.log(e.data.data),t.dialogAllotVisible=!1,t.dialogAllotVisible_A=!0}).catch(function(t){console.log(t)})}else this.$message({showClose:!0,message:"改价原因不能为空",type:"error"})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_wrap"},[a("el-radio-group",{staticClass:"selectRadio",on:{change:t.changeHandler},model:{value:t.radioActive,callback:function(e){t.radioActive=e},expression:"radioActive"}},[a("el-radio",{attrs:{label:1}},[t._v("按药品")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("按区域经理")])],1),t._v(" "),a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"商品名称："}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.fication,expression:"fication==1"}],attrs:{label:"物料类别："}},[a("el-select",{attrs:{placeholder:"请选择物料类别"},on:{focus:function(e){t.getCategory()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[a("el-option",{attrs:{label:"请选择物料类别",value:"0"}}),t._v(" "),t._l(t.categoryMenu,function(t,e,i){return a("el-option",{key:i,attrs:{label:t,value:e}})})],2)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.fication,expression:"fication==2"}],attrs:{label:"经理名称："}},[a("el-input",{attrs:{placeholder:"请输入经理名称"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.fication,expression:"fication==2"}],attrs:{label:"所在区域："}},[a("el-input",{attrs:{placeholder:"请输入所在区域"},model:{value:t.areaName,callback:function(e){t.areaName=e},expression:"areaName"}})],1),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.changeHandler(t.fication,1)}}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.radioActive,expression:"radioActive==1"}]},[a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"manufacturer",label:"生产企业"}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"物料名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"drugType",label:"剂型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specsMax",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specsMin",label:"包装规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category",label:"物料类别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cityStPrice",label:"标准价-地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cityPrice",label:"定价-地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"countyStPrice",label:"标准价-县区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"countyPrice",label:"定价-县区"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.changePrice(e.row.priceId,e.row.goodsId,1)}}},[t._v("修改省区定价")]),t._v(" "),a("div",{staticClass:"operateBtn",on:{click:function(a){t.changePrice(e.row.priceId,e.row.goodsId,2)}}},[t._v("修改个别区域价格")])]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.radioActive,expression:"radioActive==2"}]},[a("div",{staticClass:"div-inline el-button-red bitchChangePrice",on:{click:t.batchChangePrice}},[t._v("批量改价")]),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,border:"","tooltip-effect":"dark","empty-text":t.condition},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产企业"}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"物料名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"drugType",label:"剂型",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specsMax",label:"规格",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specsMin",label:"包装规格",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category",label:"物料类别",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"区域经理",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职务",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"standPrice",label:"公司标准价",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fixedPrice",label:"区域价",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fewPrice",label:"现价",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.changePrice(e.row.priceId,e.row.areaCode,e.row.id,e.row.areaCode)}}},[t._v("改价")])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改省区定价",visible:t.dialogAllotVisible,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.dialogAllotVisible=e}}},[a("div",{staticClass:"dialog_body_content"},[a("p",[t._v("\n        "+t._s(t.detailsArr.goodsName)+"  \n        "+t._s(t.detailsArr.goodsSpec)+"  \n        "+t._s(t.detailsArr.manufacturer)+"  \n        "+t._s(t.detailsArr.drugType)+"\n      ")]),t._v(" "),a("p",[t._v("\n        公司定价-省区："+t._s(t.detailsArr.provinceFixedPrice)+"\n            公司标准价-地区："+t._s(t.detailsArr.cityStandardPrice)+"\n             公司标准价-县区："+t._s(t.detailsArr.countyStandardPrice)+"\n      ")])]),t._v(" "),a("div",[a("div",{staticClass:"div_A"},[a("span",[t._v("省区定价-地区")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal_1,expression:"inputVal_1"}],class:["input_A",{biao:t.inputVal_3<t.inputVal_1}],attrs:{type:"number"},domProps:{value:t.inputVal_1},on:{change:function(e){t.inputOnlyOnePoint(1)},input:function(e){e.target.composing||(t.inputVal_1=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"div_A"},[a("span",[t._v("省区定价-县区")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal_2,expression:"inputVal_2"}],class:["input_A",{biao:t.inputVal_4<t.inputVal_2}],attrs:{type:"number"},domProps:{value:t.inputVal_2},on:{change:function(e){t.inputOnlyOnePoint(2)},input:function(e){e.target.composing||(t.inputVal_2=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"rizhi_A",on:{click:function(e){t.showChangePriceLog(t.detailsArr.priceId,t.detailsArr.position,t.detailsArr.userId,t.detailsArr.goodsId)}}},[t._v("改价日志")])]),t._v(" "),a("div",[a("span",{staticClass:"yuanyin"},[t._v("改价原因：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"改价原因(必填)",maxlength:"200"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialog-cancel-btn dialoperateBtn",on:{click:function(e){t.dialogAllotVisible=!1}}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"dialog-sure-btn dialoperateBtn",on:{click:t.Submission}},[t._v("确定")])])]),t._v(" "),a("el-dialog",{attrs:{title:"成功",visible:t.dialogAllotVisible_A,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.dialogAllotVisible_A=e}}},[a("div",{staticClass:"success_tan"},[t._v("\n      提交改价成功，等待总部审核，具体情况可至改价申请单的详情页查看\n    ")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialog-sure-btn dialoperateBtn",on:{click:function(e){t.dialogAllotVisible_A=!1}}},[t._v("确定")])])]),t._v(" "),a("changePriceLog",{ref:"changePriceLog",attrs:{changPriLogData:t.changPriLogData}})],1)},staticRenderFns:[]};var f=a("C7Lr")(h,g,!1,function(t){a("iTkZ")},"data-v-01d27ab6",null);e.default=f.exports},iTkZ:function(t,e){},oltR:function(t,e,a){"use strict";var i=a("MxwP"),o=a("27tL");t.exports=a("4HpA")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},toDE:function(t,e,a){a("SMmX")("Set")},vhYp:function(t,e,a){var i=a("k/7E");t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},vyS5:function(t,e,a){"use strict";var i=a("FITv");t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},zsLt:function(t,e,a){t.exports={default:a("1J5t"),__esModule:!0}}});
//# sourceMappingURL=2.3710cf9b34ce3c2ba9a1.js.map