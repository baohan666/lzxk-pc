webpackJsonp([13],{GxFc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("ROW2"),i=n("gFbb"),o=n("a9+l"),s=n("gh5T"),l={data:function(){return{clinicName:"",customType:"",username:"",name:"",createUser:"",provinceCode:"",cityCode:"",countyCode:"",legalPerson:"",businessLicense:"",customerList:[],departmentMenu:[],totalRecords:0,totalPageCnt:0,pageIndex:1,pageSize:10,pagin_show:!0,tableData:[],dialogAllotVisible:!1,loading:!1,allotList:{showlist:"",userId:"",billId:""},provinNamList:[]}},mounted:function(){var e=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(e)},components:{elPagination:o.a,addressPlugin:i.a},methods:{initData:function(e){var t=this;Object(s.f)(e).then(function(e){var n=e.data.data;n.dataList.length>0?(t.pagin_show=!0,t.totalRecords=n.totalRecords,t.totalPageCnt=n.totalPageCnt,t.pageIndex=n.pageIndex,t.tableData=n.dataList):(t.tableData=[],t.pagin_show=!1)}),Object(a.b)("departmentMenu")?this.departmentMenu=JSON.parse(Object(a.b)("departmentMenu")):this.departmentMenu=Object(a.c)(),console.log(this.departmentMenu)},getsearchInfo:function(e,t){return{pageIndex:e,pageSize:t,clinicName:this.clinicName,customType:this.customType,username:this.username,name:this.name,createUser:this.createUser,provinceCode:this.provinceCode,cityCode:this.cityCode,countyCode:this.countyCode,legalPerson:this.legalPerson,businessLicense:this.businessLicense}},getCusType:function(){var e=this;Object(s.e)("").then(function(t){e.customerList=t.data.data,console.log(e.customerList)})},toInquire:function(){var e=this.getsearchInfo(1,this.pageSize);this.initData(e)},exportData:function(){var e={clinicName:this.clinicName,customType:this.customType,username:this.username,name:this.name,createUser:this.createUser,provinceCode:this.provinceCode,cityCode:this.cityCode,countyCode:this.countyCode,legalPerson:this.legalPerson,businessLicense:this.businessLicense};Object(s.d)(e).then(function(e){var t=(new Date).getTime()+".xls",n=new Blob([e.data]),a=document.createElement("a");a.download=t,a.style.display="none",a.href=URL.createObjectURL(n),console.log(a.href),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)})},view:function(e){this.$router.push({path:"/viewterminCustomerSQ",query:{id:e}})},allot:function(e){console.log(e),this.allotList.showlist="",this.billId=e,this.dialogAllotVisible=!0},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,Object(s.c)({name:e}).then(function(e){if(t.loading=!1,e.data.data.length>0){console.log("有数据：",e.data.data);var n=e.data.data;t.provinNamList=n,console.log("this.provinNamList：",t.provinNamList)}else t.provinNamList=[]})):this.provinNamList=[]},currentSel:function(e){var t=this;console.log("选择省区$val：",e),this.userId=e.userId;var n={provinceCode:e.provinceCode,clinicId:this.billId};Object(s.g)(n).then(function(n){console.log("调judge接口res:",n);var a=3==e.position?"县区经理":4==e.position?"地区经理":5==e.position?"省区经理":"省办人员";t.allotList.showlist=e.name+"    "+e.areaManager+"    "+a})},allot_sure:function(){var e=this;if(""==this.allotList.showlist||0==this.allotList.showlist.length)return this.$message.error("请输入并选择分配人员"),!1;Object(s.a)({clinicId:this.billId,userId:this.userId}).then(function(t){console.log("调allot接口res:",t),e.dialogAllotVisible=!1})},cancelAllot:function(e){var t=this;this.$confirm("您确定要取消该客户的分配状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("确定"),Object(s.b)({clinicId:e}).then(function(e){console.log("取消分配成功");var n=t.getsearchInfo(t.pageIndex,t.pageSize);t.initData(n)})}).catch(function(){console.log("取消")})},seleSuccess:function(e){this.provinceCode=e.provinceCode,this.cityCode=e.cityCode,this.countyCode=e.countyCode},spreadCon:function(){var e=document.querySelector(".slideDown");if(e.classList.contains("spreadSlowlly"))return e.classList.remove("spreadSlowlly"),!1;e.classList.add("spreadSlowlly")},updataPage:function(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize;var t=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(t)},number:function(){this.phone=this.phone.replace(/[^\.\d]/g,""),this.phone=this.phone.replace(".","")}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"search_wrap"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"客户名称："}},[n("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.clinicName,callback:function(t){e.clinicName=t},expression:"clinicName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"客户类型："}},[n("el-select",{attrs:{placeholder:"请选择客户类型"},on:{focus:function(t){e.getCusType()}},model:{value:e.customType,callback:function(t){e.customType=t},expression:"customType"}},[n("el-option",{attrs:{label:"请选择客户类型",value:"0"}}),e._v(" "),e._l(e.customerList,function(e,t,a){return n("el-option",{key:a,attrs:{label:e,value:t}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"客户联系人："}},[n("el-input",{attrs:{placeholder:"请输入客户联系人"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"负责人："}},[n("el-input",{attrs:{placeholder:"请输入负责人"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("div",{staticClass:"div-inline el-button-red",on:{click:function(t){e.toInquire()}}},[e._v("查询")]),e._v(" "),n("div",{staticClass:"div-inline el-button-red",on:{click:function(t){e.exportData()}}},[e._v("导出")])],1),e._v(" "),n("el-form",{ref:"form",staticClass:"demo-form-inline slideDown",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"创建人："}},[n("el-input",{attrs:{placeholder:"请输入创建人"},model:{value:e.createUser,callback:function(t){e.createUser=t},expression:"createUser"}})],1),e._v(" "),n("div",{staticClass:"province_city_county"},[n("el-form-item",{attrs:{label:"所在地区："}},[n("address-plugin",{attrs:{required:"false"},on:{seleSuccess:e.seleSuccess}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"法人："}},[n("el-input",{attrs:{placeholder:"请输入法人"},model:{value:e.legalPerson,callback:function(t){e.legalPerson=t},expression:"legalPerson"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"营业执照号："}},[n("el-input",{attrs:{placeholder:"请输入营业执照号"},model:{value:e.businessLicense,callback:function(t){e.businessLicense=t},expression:"businessLicense"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"table_wrap"},[n("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:"","tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"clinicName",label:"客户名称",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"customType",label:"客户类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.customType?"诊所":2==t.row.customType?"乡镇卫生院":3==t.row.customType?"村卫生室":4==t.row.customType?"单体药房":5==t.row.customType?"连锁药房":6==t.row.customType?"民营医院":7==t.row.customType?"专科医院":8==t.row.customType?"综合医院":"军队医院")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"belongsArea",label:"所属区域"}}),e._v(" "),n("el-table-column",{attrs:{prop:"detail",label:"详细地址"}}),e._v(" "),n("el-table-column",{attrs:{prop:"businessLicense",label:"营业执照号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"客户联系人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clinicPhone",label:"联系人电话"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"负责人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"负责人手机号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createUser",label:"创建人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"operateBtn",on:{click:function(n){e.view(t.row.id)}}},[e._v("查看")]),e._v(" "),n("div",{staticClass:"operateBtn",on:{click:function(n){e.allot(t.row.id)}}},[e._v("分配")]),e._v(" "),n("div",{staticClass:"operateBtn",on:{click:function(n){e.cancelAllot(t.row.id)}}},[e._v("取消分配")])]}}])})],1),e._v(" "),n("el-pagination",{attrs:{pageIndex:e.pageIndex,pageSize:e.pageSize,totalRecords:e.totalRecords,totalPageCnt:e.totalPageCnt,pagin_show:e.pagin_show},on:{clickpage:e.updataPage}})],1),e._v(" "),n("el-dialog",{attrs:{title:"分配人员",visible:e.dialogAllotVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogAllotVisible=t}}},[n("div",{staticClass:"dialog_body_content"},[e._v("\n      地县经理：\n      "),n("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入并选择地县经理","remote-method":function(t){e.remoteMethod(t)},loading:e.loading},on:{change:function(t){e.currentSel(t)}},model:{value:e.allotList.showlist,callback:function(t){e.$set(e.allotList,"showlist",t)},expression:"allotList.showlist"}},e._l(e.provinNamList,function(e,t){return n("el-option",{key:t,attrs:{label:e.name+"    "+e.areaManager+"    "+(3==e.position?"县区经理":4==e.position?"地区经理":""),value:e}})}))],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"dialog-cancel-btn dialoperateBtn",on:{click:function(t){e.dialogAllotVisible=!1}}},[e._v("取消")]),e._v(" "),n("span",{staticClass:"dialog-sure-btn dialoperateBtn",on:{click:e.allot_sure}},[e._v("确定")])])])],1)},staticRenderFns:[]};var c=n("C7Lr")(l,r,!1,function(e){n("Q4ik"),n("e+iE")},"data-v-125b63b6",null);t.default=c.exports},Q4ik:function(e,t){},"e+iE":function(e,t){},gh5T:function(e,t,n){"use strict";n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"h",function(){return m});var a=n("lta2"),i=n("6iV/"),o=n.n(i),s=function(e){return a.a.post(a.a.baseURL+"provinceClinic/list",o.a.stringify(e))},l=function(e){return a.a.post(a.a.baseURL+"common/clinicType",o.a.stringify(e))},r=function(e){return a.a.post(a.a.baseURL+"provinceClinic/excel",o.a.stringify(e),{responseType:"blob"})},c=function(e){return a.a.post(a.a.baseURL+"userInfo/cityCountyName",o.a.stringify(e))},u=function(e){return a.a.post(a.a.baseURL+"userInfo/judge",o.a.stringify(e))},d=function(e){return a.a.post(a.a.baseURL+"provinceClinic/allot",o.a.stringify(e))},p=function(e){return a.a.post(a.a.baseURL+"provinceClinic/cancelAllot",o.a.stringify(e))},m=function(e){return a.a.post(a.a.baseURL+"provinceClinic/detail",o.a.stringify(e))}}});
//# sourceMappingURL=13.b6ec6f1c82f3d618d37f.js.map