{"version":3,"sources":["webpack:///src/pages/headquarter/goodsManage/changePrice.vue","webpack:///./src/pages/headquarter/goodsManage/changePrice.vue?8722","webpack:///./src/pages/headquarter/goodsManage/changePrice.vue"],"names":["changePrice","name","data","infoList","tableData","goodsName","this","$route","query","subSearchName","changPriLogData","priceInfo","changPriceNum","changeReason","dialogReasonVisible","obj","created","initData","components","goBack","changePriceLog","methods","_this","Object","goodsManage","goodsId","then","res","good","list","console","log","toInquire","submitChangePrice","_this2","arrayListStr","datalist","stringify_default","applyType","userId","cache","$router","go","handleChange","dataRow","type","priceType","oldPrice","newPrice","provincePrice","oldProvincePrice","cityPrice","oldCityPrice","countyPrice","oldCountyPrice","id","managerUserId","push","length","handleInput2","e","target","value","match","changePartPrice","$id","$managerUserId","path","managerId","searchCity","searchCounty","showChangePriceLog","$position","_this3","logType","pageIndex","pageSize","priceId","$refs","dialogShow","goodsManage_changePrice","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","gutter","_s","goodsSpecsMax","goodsManufacturer","goodsType","ref","inline","placeholder","model","callback","$$v","trim","expression","on","click","$event","border","tooltip-effect","max-height","prop","label","scopedSlots","_u","key","fn","scope","directives","rawName","row","modifiers","class","tableInput","color_red","color_blue","domProps","change","keydown","input","composing","$set","blur","$forceUpdate","position","visible","append-to-body","width","update:visible","cols","rows","slot","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/70.c35b1fb7ec28d359f4b8.js","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<go-back title=\"改价\"></go-back>\r\n\t\t<div class=\"infoDetail\">\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<span>{{infoList.goodsName}}</span>\r\n\t\t\t\t<span>{{infoList.goodsSpecsMax}}</span>\r\n\t\t\t\t<span>{{infoList.goodsManufacturer}}</span>\r\n\t\t\t\t<span>{{infoList.goodsType}}</span>\r\n\t\t\t</el-row>\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<span>公司标准价-省区： {{infoList.provincePrice}}</span>\r\n\t\t\t\t<span>公司标准价-地区： {{infoList.cityPrice}}</span>\r\n\t\t\t\t<span>公司标准价-县区： {{infoList.countyPrice}}</span>\r\n\t\t\t</el-row>\r\n\t\t</div>\r\n\t\t<div class=\"table_wrap\">\r\n\t\t\t<el-form ref=\"form\" :inline=\"true\" class=\"demo-form-inline\">\r\n\t\t\t  \t<el-form-item>\r\n\t\t\t\t    <el-input v-model.trim=\"goodsName\" placeholder=\"请输入省区经理名称或省区名称\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<div class=\"div-inline el-button-red bitchRemove\" @click=\"toInquire()\">查询</div>\r\n\t\t\t</el-form>\r\n\t\t\t<el-table ref=\"multipleTable\" :data=\"tableData\" border tooltip-effect=\"dark\" max-height=\"530\">\r\n\t\t\t    <el-table-column prop=\"proName\" label=\"省区名称\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"userName\" label=\"省区经理名称\"></el-table-column>\r\n\t\t\t    <el-table-column prop=\"provincePrice\" label=\"公司定价-省区\">\r\n\t\t\t    \t<template slot-scope=\"scope\">\r\n\t\t\t\t\t    <input v-model.trim=\"scope.row.provincePrice\" @change=\"handleChange(scope.row,'provincePrice')\" type=\"number\" @keydown=\"handleInput2\" :class=\"{'tableInput': true, 'color_red' : infoList.provincePrice < scope.row.provincePrice, 'color_blue' : infoList.provincePrice > scope.row.provincePrice}\"></input>\r\n\t\t\t\t\t</template>\r\n\t\t\t    </el-table-column>\r\n\t\t\t  \t<el-table-column prop=\"cityPrice\" label=\"公司定价-地区\">\r\n\t\t\t  \t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t    <input  v-model.trim=\"scope.row.cityPrice\" @change=\"handleChange(scope.row,'cityPrice')\" type=\"number\" @keydown=\"handleInput2\" :class=\"{'tableInput': true, 'color_red' : infoList.cityPrice < scope.row.cityPrice, 'color_blue' : infoList.cityPrice > scope.row.cityPrice}\"></input>\r\n\t\t\t\t\t</template>\r\n\t\t\t  \t</el-table-column>\r\n\t\t\t    <el-table-column prop=\"countyPrice\" label=\"公司定价-县区\">\r\n\t\t\t    \t<template slot-scope=\"scope\">\r\n\t\t\t\t\t    <input v-model.trim=\"scope.row.countyPrice\" @change=\"handleChange(scope.row,'countyPrice')\" type=\"number\" @keydown=\"handleInput2\" :class=\"{'tableInput': true, 'color_red' : infoList.countyPrice < scope.row.countyPrice, 'color_blue' : infoList.countyPrice > scope.row.countyPrice}\"></input>\r\n\t\t\t\t\t</template>\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column prop=\"address\" label=\"操作\">\r\n\t\t\t    \t<template slot-scope=\"scope\">\r\n\t\t\t\t        <div class=\"operateBtn\" @click=\"changePartPrice(scope.row.id, scope.row.managerUserId)\">修改个别区域</div>\r\n\t\t\t\t        <div class=\"operateBtn\" @click=\"showChangePriceLog(scope.row.id, scope.row.managerUserId, scope.row.position)\">改价日志</div>\r\n\t\t\t\t    </template>\r\n\t\t\t    </el-table-column>\r\n\t\t  \t</el-table>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"operateWraper\">\r\n\t\t\t<div class=\"div-inline el-button-red\" v-show=\"changPriceNum>0\" @click = \"dialogReasonVisible=true\">提交改价</div>\r\n\t\t</div>\r\n\t\t<changePriceLog ref=\"changePriceLog\" :changPriLogData=\"changPriLogData\"></changePriceLog>\r\n\t\t<el-dialog title=\"改价原因\" :visible.sync=\"dialogReasonVisible\" :append-to-body='true' width=\"35%\">\r\n\t\t\t<div class= 'dialog_body_content'>\r\n\t\t\t\t<div class=\"dialog_changePrice_reason\">\r\n\t\t\t\t\t改价原因：\r\n\t\t\t\t\t<textarea class=\"checkReason\" placeholder=\"请填写改价原因\" v-model=\"changeReason\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n    \t\t\t<el-button v-show=\"changeReason==''\" type=\"danger\" class=\"dialogDisaBtn\" disabled>确定</el-button>\r\n\t\t\t\t<span v-show=\"changeReason!=''\" class=\"dialog-sure-btn dialoperateBtn\" @click=\"submitChangePrice()\">确定</span>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n\r\n</template>\r\n<script>\r\n\timport goBack from 'src/components/goBack';\r\n\timport changePriceLog from 'src/components/changePriceLog';\r\n\timport {getStore} from 'src/config/cache'\r\n\r\n\r\n  \timport {getChaPriceData, getChangePriceLogData, saveChangePriceData} from 'src/api/headquarter_url/goodsManage';\r\n\r\n  export default {\r\n  \tname : 'detailFeedbackZB',\r\n    data() {\r\n      \treturn {\r\n       \t\tinfoList:[],  //对象\r\n       \t\ttableData: [],\t//数据列表\r\n       \t\tgoodsName: this.$route.query.subSearchName,//省区经理及省区名称\r\n       \t\tchangPriLogData:[],//改价日志数据\r\n       \t\tpriceInfo: [],//改价数据集合\r\n       \t\tchangPriceNum:0,\r\n       \t\tchangeReason: '',//改价原因\r\n       \t\tdialogReasonVisible: false,\r\n          obj: {}\r\n      \t}\r\n    },\r\n    created(){\r\n\t\tthis.initData()\r\n\t},\r\n\tcomponents:{\r\n\t\tgoBack,\r\n\t    changePriceLog\r\n\t},\r\n    methods: {\r\n        initData(){\r\n\t        getChaPriceData({goodsId:this.$route.query.goodsId, subSearchName: this.goodsName}).then(res => {\r\n\t\t\t\tthis.infoList=res.data.data.good;\r\n\t\t\t\tthis.tableData =res.data.data.list;\r\n\t\t\t\tconsole.log(this.tableData);\r\n\t        })\r\n\t\t},\r\n\t\t//查询\r\n\t\ttoInquire(){\r\n\t\t\tthis.initData()\r\n\t\t},\r\n\t\t//提交改价\r\n\t\tsubmitChangePrice(){\r\n\t\t\tlet arrayListStr={\"priceInfo\": this.priceInfo, \"changeReason\":this.changeReason}\r\n\t\t\tlet datalist = {\r\n\t\t\t\t\"arrayListStr\": JSON.stringify(arrayListStr),\r\n\t\t\t\t\"applyType\": 1 ,//1总部 2省区\r\n\t\t\t\t\"userId\":getStore('accountId'),\r\n\t\t\t}\r\n\t\t\tconsole.log(datalist);\r\n\t\t\tsaveChangePriceData(datalist).then( res =>{\r\n\t\t\t\tthis.$router.go(-1);\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleChange(dataRow, type){\r\n          // console.log(dataRow);\r\n\t\t\t//priceType表示1.公司定价-省区2.省区定价-地区、3.省区定价-县区、4.地区价、5.县区价\r\n\t\t\tlet priceType=1;\r\n\t\t\tlet oldPrice=1;\r\n\t\t\tlet newPrice=1;\r\n\t\t\tif(type == \"provincePrice\"){\r\n\t\t\t\tnewPrice = dataRow.provincePrice;\r\n\t\t\t\toldPrice = dataRow.oldProvincePrice;//老价格\r\n\t\t\t\tpriceType = 1 ;\r\n\t\t\t}else if(type == \"cityPrice\"){\r\n\t\t\t\tnewPrice = dataRow.cityPrice;\r\n\t\t\t\toldPrice = dataRow.oldCityPrice;//老价格\r\n\t\t\t\tpriceType = 2 ;\r\n\t\t\t}else{\r\n\t\t\t\tnewPrice = dataRow.countyPrice;\r\n\t\t\t\toldPrice = dataRow.oldCountyPrice;//老价格\r\n\t\t\t\tpriceType = 3 ;\r\n\t\t\t}\r\n\t\t\tif(newPrice == \"oldPrice\"){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet priceInfo = {\r\n\t\t\t\t\"priceType\" : priceType, // 省地县\r\n\t\t\t\t\"id\" : dataRow.id , // 每行 id\r\n\t\t\t\t\"goodsId\" : this.infoList.goodsId , // 用户id\r\n\t\t\t\t\"oldPrice\" : oldPrice ,  // 老价格\r\n\t\t\t\t\"newPrice\" : newPrice , // 新价格\r\n\t\t\t\t// \"newPrice\" : dataRow.areaPrice ,\r\n\t\t\t\t\"userId\" : dataRow.managerUserId\r\n\t\t\t};\r\n\t\t\t// [{\r\n      //   priceInfo.userId:[\r\n      //     {},\r\n      //     {},\r\n      //     {}\r\n      //   ],\r\n      //   priceInfo.userId:[\r\n      //     {},\r\n      //     {},\r\n      //     {}\r\n      //   ]\r\n      // }]\r\n      this.priceInfo=[];\r\n      if (priceInfo.userId in this.obj) {\r\n        console.log(this.obj);\r\n        console.log(priceInfo.userId);\r\n        console.log(this.obj[priceInfo.userId]);\r\n        if (priceInfo.priceType==1){\r\n          this.obj[priceInfo.userId][0] = priceInfo;\r\n        }else if (priceInfo.priceType==2){\r\n          this.obj[priceInfo.userId][1] = priceInfo;\r\n        } else if (priceInfo.priceType==3){\r\n          this.obj[priceInfo.userId][2] = priceInfo;\r\n        }\r\n      }else{\r\n        this.obj[priceInfo.userId]=[];\r\n        this.obj[priceInfo.userId][0]=priceInfo;\r\n        console.log(this.obj)\r\n      }\r\n      this.priceInfo.push(this.obj);\r\n\t\t\tthis.changPriceNum = this.priceInfo.length;\r\n\t\t},\r\n\t\thandleInput2(e) {\r\n            // 通过正则过滤小数点后两位\r\n            e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\r\n\r\n        },\r\n\r\n\t\t//修改个别区域价格\r\n\t\tchangePartPrice($id, $managerUserId){\r\n\r\n\t\t\tthis.$router.push({path:'/changePartPriceZB',query:{goodsId:this.$route.query.goodsId, managerId: $managerUserId, userId: $managerUserId, searchCity: \"\", searchCounty: \"\"}});\r\n\t\t},\r\n\t\t//查看改价日志\r\n\t\tshowChangePriceLog($id, $managerUserId, $position){\r\n\t\t\tlet logType = 0;\r\n\t\t\t$position==5 ? logType=1 : $position==4 ?  logType=2 : logType=3 ;//职位5=sheng 4=di 3=xian\r\n      if ($id==null){\r\n        $id = 0\r\n      }\r\n\t\t\tlet datalist ={\r\n\t\t\t\tpageIndex:1,\r\n\t\t\t\tpageSize:10,\r\n\t\t\t\tpriceId:$id,//商品价格表id\r\n\t\t\t\tgoodsId:this.$route.query.goodsId,//商品id\r\n\t\t\t\tmanagerId:$managerUserId,//省区经理id\r\n\t\t\t\tuserId:$managerUserId,//省区、地区、县区id\r\n\t\t\t\tlogType:logType  //1省区 2地区 3县区\r\n\t\t\t}\r\n\t\t\tgetChangePriceLogData(datalist).then(res => {\r\n\t\t\t\tthis.changPriLogData= res.data.data\r\n\t\t\t\tthis.$refs.changePriceLog.dialogShow();\r\n\t\t\t})\r\n\t\t}\r\n    },\r\n\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped=\"scoped\">\r\n\r\n.infoDetail{\r\n\tpadding:20px 30px;\r\n\tborder-bottom:1px solid #ddd;\r\n\tspan{\r\n\t\tpadding-right:15px;\r\n\t\tfont-size:14px;\r\n\t\tcolor:#333;\r\n\t\tline-height:40px;\r\n\t}\r\n\tbackground:#fff;\r\n}\r\n.table_wrap{\r\n\tmargin:30px;\r\n\tpadding:20px;\r\n\tbackground:#fff;\r\n\tcolor:#666;\r\n\t.tableInput{\r\n\t    border-radius: 4px;\r\n\t    border: 1px solid #dcdfe6;\r\n\t    box-sizing: border-box;\r\n\t    height: 40px;\r\n\t    line-height: 40px;\r\n\t    padding: 0 15px;\r\n\t    width: 60%;\r\n\r\n\t}\r\n}\r\n.operateWraper {\r\n\t\tmargin: 20px;\r\n\t\ttext-align: center;\r\n\t\t.el-button-red {\r\n\t\t\tpadding: 0 0.5rem;\r\n\t\t}\r\n\r\n\t}\r\n.dialog_changePrice_reason{\r\n\tpadding:30px;\r\n\t.checkReason{\r\n\t\tborder:1px solid #e6e6e6;\r\n\t\tborder-radius:5px;\r\n\t\twidth:80%;\r\n\t\theight:70px;\r\n\t\tvertical-align: middle;\r\n\t\tpadding:10px;\r\n\t\tline-height:26px;\r\n\t}\r\n}\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/headquarter/goodsManage/changePrice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('go-back',{attrs:{\"title\":\"改价\"}}),_vm._v(\" \"),_c('div',{staticClass:\"infoDetail\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('span',[_vm._v(_vm._s(_vm.infoList.goodsName))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.infoList.goodsSpecsMax))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.infoList.goodsManufacturer))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.infoList.goodsType))])]),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('span',[_vm._v(\"公司标准价-省区： \"+_vm._s(_vm.infoList.provincePrice))]),_vm._v(\" \"),_c('span',[_vm._v(\"公司标准价-地区： \"+_vm._s(_vm.infoList.cityPrice))]),_vm._v(\" \"),_c('span',[_vm._v(\"公司标准价-县区： \"+_vm._s(_vm.infoList.countyPrice))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"table_wrap\"},[_c('el-form',{ref:\"form\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"请输入省区经理名称或省区名称\"},model:{value:(_vm.goodsName),callback:function ($$v) {_vm.goodsName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"goodsName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"div-inline el-button-red bitchRemove\",on:{\"click\":function($event){_vm.toInquire()}}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",attrs:{\"data\":_vm.tableData,\"border\":\"\",\"tooltip-effect\":\"dark\",\"max-height\":\"530\"}},[_c('el-table-column',{attrs:{\"prop\":\"proName\",\"label\":\"省区名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"省区经理名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"provincePrice\",\"label\":\"公司定价-省区\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(scope.row.provincePrice),expression:\"scope.row.provincePrice\",modifiers:{\"trim\":true}}],class:{'tableInput': true, 'color_red' : _vm.infoList.provincePrice < scope.row.provincePrice, 'color_blue' : _vm.infoList.provincePrice > scope.row.provincePrice},attrs:{\"type\":\"number\"},domProps:{\"value\":(scope.row.provincePrice)},on:{\"change\":function($event){_vm.handleChange(scope.row,'provincePrice')},\"keydown\":_vm.handleInput2,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"provincePrice\", $event.target.value.trim())},\"blur\":function($event){_vm.$forceUpdate()}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cityPrice\",\"label\":\"公司定价-地区\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(scope.row.cityPrice),expression:\"scope.row.cityPrice\",modifiers:{\"trim\":true}}],class:{'tableInput': true, 'color_red' : _vm.infoList.cityPrice < scope.row.cityPrice, 'color_blue' : _vm.infoList.cityPrice > scope.row.cityPrice},attrs:{\"type\":\"number\"},domProps:{\"value\":(scope.row.cityPrice)},on:{\"change\":function($event){_vm.handleChange(scope.row,'cityPrice')},\"keydown\":_vm.handleInput2,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"cityPrice\", $event.target.value.trim())},\"blur\":function($event){_vm.$forceUpdate()}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"countyPrice\",\"label\":\"公司定价-县区\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(scope.row.countyPrice),expression:\"scope.row.countyPrice\",modifiers:{\"trim\":true}}],class:{'tableInput': true, 'color_red' : _vm.infoList.countyPrice < scope.row.countyPrice, 'color_blue' : _vm.infoList.countyPrice > scope.row.countyPrice},attrs:{\"type\":\"number\"},domProps:{\"value\":(scope.row.countyPrice)},on:{\"change\":function($event){_vm.handleChange(scope.row,'countyPrice')},\"keydown\":_vm.handleInput2,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"countyPrice\", $event.target.value.trim())},\"blur\":function($event){_vm.$forceUpdate()}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operateBtn\",on:{\"click\":function($event){_vm.changePartPrice(scope.row.id, scope.row.managerUserId)}}},[_vm._v(\"修改个别区域\")]),_vm._v(\" \"),_c('div',{staticClass:\"operateBtn\",on:{\"click\":function($event){_vm.showChangePriceLog(scope.row.id, scope.row.managerUserId, scope.row.position)}}},[_vm._v(\"改价日志\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"operateWraper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changPriceNum>0),expression:\"changPriceNum>0\"}],staticClass:\"div-inline el-button-red\",on:{\"click\":function($event){_vm.dialogReasonVisible=true}}},[_vm._v(\"提交改价\")])]),_vm._v(\" \"),_c('changePriceLog',{ref:\"changePriceLog\",attrs:{\"changPriLogData\":_vm.changPriLogData}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"改价原因\",\"visible\":_vm.dialogReasonVisible,\"append-to-body\":true,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.dialogReasonVisible=$event}}},[_c('div',{staticClass:\"dialog_body_content\"},[_c('div',{staticClass:\"dialog_changePrice_reason\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t改价原因：\\n\\t\\t\\t\\t\\t\"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.changeReason),expression:\"changeReason\"}],staticClass:\"checkReason\",attrs:{\"placeholder\":\"请填写改价原因\",\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.changeReason)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.changeReason=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changeReason==''),expression:\"changeReason==''\"}],staticClass:\"dialogDisaBtn\",attrs:{\"type\":\"danger\",\"disabled\":\"\"}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changeReason!=''),expression:\"changeReason!=''\"}],staticClass:\"dialog-sure-btn dialoperateBtn\",on:{\"click\":function($event){_vm.submitChangePrice()}}},[_vm._v(\"确定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-47294682\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/headquarter/goodsManage/changePrice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-47294682\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./changePrice.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./changePrice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./changePrice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-47294682\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./changePrice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-47294682\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/headquarter/goodsManage/changePrice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}