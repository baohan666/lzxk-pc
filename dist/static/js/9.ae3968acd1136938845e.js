webpackJsonp([9],{"/iAw":function(t,e){},"6D/D":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("ROW2");var o=a("a9+l"),s=a("Ube3"),i={data:function(){return{departmentMenu:[],totalRecords:0,totalPageCnt:0,pageIndex:1,pageSize:10,pagin_show:!0,tableData:[],goodsName:"",dialogAllotVisible:!1,goodsDetail:[]}},mounted:function(){var t=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(t)},components:{elPagination:o.a},methods:{initData:function(t){var e=this;Object(s.b)(t).then(function(t){console.log("调getProStockData接口res：",t);var a=t.data.data;a.dataList.length>0?(e.pagin_show=!0,e.totalRecords=a.totalRecords,e.totalPageCnt=a.totalPageCnt,e.pageIndex=a.pageIndex,e.tableData=a.dataList):(e.tableData=[],e.pagin_show=!1)})},getsearchInfo:function(t,e){return{pageIndex:t,pageSize:e,goodsName:this.goodsName}},toInquire:function(){var t=this.getsearchInfo(1,this.pageSize);this.initData(t)},exportData:function(){var t={goodsName:this.goodsName};Object(s.a)(t).then(function(t){var e=(new Date).getTime()+".xls",a=new Blob([t.data]),o=document.createElement("a");o.download=e,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)})},viewLog:function(t){this.$router.push({path:"/provinStockLogSQ",query:{id:t}})},stockActualEdit:function(t){var e=this;this.dialogAllotVisible=!0,Object(s.d)({goodsStockId:t}).then(function(t){console.log("调toUpdateGoodsStock接口res：",t);var a=t.data.data;e.goodsDetail=a,e.goodsDetail.remark=""})},allot_sure:function(){var t=this;if(""==this.goodsDetail.stockActual||0==this.goodsDetail.stockActual.length)return this.$message.error("请输入库存"),!1;if(this.goodsDetail.stockActual<this.goodsDetail.stockUnusable)return this.$message.error("实际库存不能少于冻结库存"),!1;if(""==this.goodsDetail.remark||0==this.goodsDetail.remark.length)return this.$message.error("请输入修改原因"),!1;var e={stockActual:this.goodsDetail.stockActual,remark:this.goodsDetail.remark,goodsStockId:this.goodsDetail.id};Object(s.e)(e).then(function(e){t.dialogAllotVisible=!1;var a=t.getsearchInfo(t.pageIndex,t.pageSize);t.initData(a)})},updataPage:function(t){console.log("分页val：",t),this.pageIndex=t.pageIndex,this.pageSize=t.pageSize;var e=this.getsearchInfo(this.pageIndex,this.pageSize);this.initData(e)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"商品名称："}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}})],1),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.toInquire()}}},[t._v("查询")]),t._v(" "),a("div",{staticClass:"div-inline el-button-red",on:{click:function(e){t.exportData()}}},[t._v("导出")])],1)],1),t._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"goodsName",label:"产品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specsMax",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enterprise",label:"生产企业"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stockActual",label:"实际库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"stockActual"},[t._v(t._s(e.row.stockActual))]),t._v(" "),a("div",{staticClass:"operateBtn",on:{click:function(a){t.stockActualEdit(e.row.id)}}},[t._v("修改")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stockUsable",label:"可销售库存"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stockUnusable",label:"冻结库存"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operateBtn",on:{click:function(a){t.viewLog(e.row.id)}}},[t._v("查看日志")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{pageIndex:t.pageIndex,pageSize:t.pageSize,totalRecords:t.totalRecords,totalPageCnt:t.totalPageCnt,pagin_show:t.pagin_show},on:{clickpage:t.updataPage}})],1),t._v(" "),a("el-dialog",{staticClass:"provinceStock_dialog",attrs:{title:"实际库存修改",visible:t.dialogAllotVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogAllotVisible=e}}},[a("div",{staticClass:"dialog_body_content"},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称："}},[a("span",[t._v(t._s(t.goodsDetail.goodsName))])]),t._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("span",[t._v(t._s(t.goodsDetail.specsMax))])]),t._v(" "),a("el-form-item",{attrs:{label:"库存："}},[a("el-input",{model:{value:t.goodsDetail.stockActual,callback:function(e){t.$set(t.goodsDetail,"stockActual",e)},expression:"goodsDetail.stockActual"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"修改原因："}},[a("el-input",{attrs:{type:"textarea",maxLength:"100"},model:{value:t.goodsDetail.remark,callback:function(e){t.$set(t.goodsDetail,"remark",e)},expression:"goodsDetail.remark"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialog-cancel-btn dialoperateBtn",on:{click:function(e){t.dialogAllotVisible=!1}}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"dialog-sure-btn dialoperateBtn",on:{click:t.allot_sure}},[t._v("确定")])])])],1)},staticRenderFns:[]};var n=a("C7Lr")(i,l,!1,function(t){a("lVhg"),a("/iAw")},"data-v-5fd813da",null);e.default=n.exports},Ube3:function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"d",function(){return n}),a.d(e,"e",function(){return r}),a.d(e,"a",function(){return c}),a.d(e,"c",function(){return d});var o=a("lta2"),s=a("6iV/"),i=a.n(s),l=function(t){return o.a.post(o.a.baseURL+"goodsStock/provinceList",i.a.stringify(t))},n=function(t){return o.a.post(o.a.baseURL+"goodsStock/toUpdateGoodsStock",i.a.stringify(t))},r=function(t){return o.a.post(o.a.baseURL+"goodsStock/updateGoodsStock",i.a.stringify(t))},c=function(t){return o.a.post(o.a.baseURL+"goodsStock/provinceExcel",i.a.stringify(t),{responseType:"blob"})},d=function(t){return o.a.post(o.a.baseURL+"goodsStockLog/list",i.a.stringify(t))}},lVhg:function(t,e){}});
//# sourceMappingURL=9.ae3968acd1136938845e.js.map