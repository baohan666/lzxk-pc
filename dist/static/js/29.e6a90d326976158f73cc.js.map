{"version":3,"sources":["webpack:///src/pages/province/marketManage/add_promoPolicy.vue","webpack:///./src/pages/province/marketManage/add_promoPolicy.vue?d4bb","webpack:///./src/pages/province/marketManage/add_promoPolicy.vue"],"names":["add_promoPolicy","data","ruleForm","policyType","policyTypeCheck","policyStartDate","policyEndDate","title","verificationStartDate","verificationEndDate","remark","tableData1","tableData2","tableData5","tableData3","tableData6","rangeList","userId","goodsList","isradio","dialogSeleGoodsVisible","tableData","goodsNamem","specsMaxm","selectType","mainList","subList","goodsIdm","goodsId","pageIndex","pageSize","dialogRangeVisible","awardGoods","handleType","isHuiKuan","created","components","goBack","departComponet","departComponent","datepicker","data_plugin","elPagination","el_page","selectGoods","releaseRange","mainTable","main_table","subTable","sub_table","methods","changeSelect","val","type","console","log","this","selectAwardGoods","params","_this","undefined","datalist","goodsName","name","length","Object","promotionPolicy","then","res","$refs","dialogSeleGoods","dialogShow","$message","success","getGoodsList","_this2","departmentIds","departmentId","formInline","handleInput2","e","uploadData","_this3","forEach","item","index","arr","includes","id","arraylist","awardNum","afterDiscountPrice","batchNumber","specsMax","push","collectionNum","tablist","extends_default","renderHeader","h","_this4","class","on","click","renderHeader1","_this5","delItem","filter","p","goodId","deleScopeRow","policyChange","setRange","_this6","toString","dialogSeleProMa","closeGoodsDiolog","closeDiolog","updataPage","getsearchInfo","initData","setProvMange","_this7","saveAddPolGoods","_this8","trim","policyRule","isSubmit","obj","_num","slice","reverse","discountPrice","mainArray","subArray","_obj","_num2","_obj2","_num3","stringify_default","policyRange","code","$router","go","msg","marketManage_add_promoPolicy","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","ref","model","inline","label-width","gutter","span","label","placeholder","change","value","callback","$$v","$set","expression","key","startIsShow","endIsShow","directives","rawName","cols","rows","domProps","input","$event","target","composing","_e","border","tooltip-effect","render-header","scopedSlots","_u","fn","scope","_s","row","prop","oninput","keydown","items","isView","relRangeList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/29.e6a90d326976158f73cc.js","sourcesContent":["<template>\n  <div class=\"create_wraper\">\n    <go-back title=\"新增促销政策\"></go-back>\n    <el-form :model=\"ruleForm\" :inline=\"true\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-form-inline\">\n\n      <div class=\"containInfo_wraper\">\n        <div class=\"detail_title\"><i class=\"line_Icon\"></i>基本信息：</div>\n        <div class=\"detail_content\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"7\">\n              <el-form-item label=\"政策类型：\" class=\"is-required\">\n                <el-select v-model=\"ruleForm.policyType\" placeholder=\"请选择政策类型\" @change =\"policyChange\">\n                  <el-option  label=\"奖励政策\" value=\"2\" key=\"1\"></el-option>\n                  <el-option  label=\"回款奖励\" value=\"3\" key=\"2\"></el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"7\">\n              <el-form-item label=\"政策名称：\" class=\" is-required\">\n                <el-input v-model=\"ruleForm.title\" placeholder=\"请输入政策名称\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <div class=\"div-inline el-form-item is-required\">\n                <div class=\"div-inline el-form-item__label\">政策有效期：</div>\n                <datepicker startIsShow = \"true\" endIsShow= \"true\" class=\"div-inline\" @changeSelect=\"(value) =>changeSelect(value, 'policyValidDate')\"></datepicker>\n              </div>\n            </el-col>\n            <el-col :span=\"10\">\n              <div class=\"div-inline el-form-item\">\n                <div class=\"div-inline\">核销期间：</div>\n                <datepicker startIsShow = \"true\" endIsShow= \"true\" class=\"div-inline\" @changeSelect=\"(value) =>changeSelect(value, 'verifyDate')\"></datepicker>\n              </div>\n            </el-col>\n            <el-col :span=\"7\" v-show=\"ruleForm.policyType == 2\">\n              <div class=\"div-inline el-form-item is-required\">\n                <div class=\"div-inline el-form-item__label\">政策子类型：</div>\n                <el-select v-model=\"ruleForm.policyTypeCheck\" placeholder=\"请选择政策子类型\">\n                  <el-option label=\"请选择政策子类型\" value=''></el-option>\n                  <el-option  label=\"人员变动\" value=\"1\" key=\"1\"></el-option>\n                  <el-option  label=\"库存处理\" value=\"2\" key=\"2\"></el-option>\n                  <el-option  label=\"纯回款奖励\" value=\"3\" key=\"3\"></el-option>\n                  <el-option  label=\"会议奖励\" value=\"4\" key=\"4\"></el-option>\n                </el-select>\n              </div>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"20\">政策说明:<textarea class=\"poliyMark\" v-model=\"ruleForm.remark\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea></el-col>\n          </el-row>\n        </div>\n      </div>\n      <div class=\"containInfo_wraper\">\n        <div class=\"detail_title\"><i class=\"line_Icon\"></i>政策规则</div>\n\n        <div class = \"table_wrap\">\n          <!--选择商品弹窗-->\n          <select-goods title=\"选择商品\" @getGoodsList=\"getGoodsList\" ref=\"dialogSeleGoods\" :goodsList=\"goodsList\" :policyType=\"policyType\" :isradio=\"isradio\" @selectAwardGoods=\"selectAwardGoods\" @closeGoodsDiolog=\"closeGoodsDiolog\" @uploadData=\"uploadData\">\n          </select-goods>\n          <div v-if=\"awardGoods=='hide'\" class = \"viewRemark\" @click=\"selectAwardGoods\">请选择需回款商品</div>\n          <div v-if = \"awardGoods=='show'\">\n            <!--奖励商品-->\n            <el-table v-if=\"ruleForm.policyType==2\" :data=\"ruleForm.tableData1\" border tooltip-effect=\"dark\">\n              <el-table-column :render-header=\"renderHeader\">\n                <template slot-scope=\"scope\">\n                  <div>{{scope.row.goodsName}}<span class=\"viewRemark\" @click = \"deleScopeRow(scope.row.goodsId)\">删除</span></div>\n                  <div>{{scope.row.specsMax}}</div>\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"awardNum\" label=\"奖励数量\">\n                <template slot-scope=\"scope\">\n                  <input class=\"tableInput\" type=\"number\" oninput=\"if(value.length>8)value=value.slice(0,8)\" v-model=\"scope.row.awardNum\" v-vue-onkeypress>\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"afterDiscountPrice\" label=\"折后价\">\n                <template slot-scope=\"scope\">\n                  <input class=\"tableInput\" v-model=\"scope.row.afterDiscountPrice\" type=\"number\" oninput=\"if(value.length>8)value=value.slice(0,8)\" @keydown=\"handleInput2\">\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"batchNumber\" label=\"指定批号\">\n                <template slot-scope=\"scope\">\n                  <input class=\"tableInput\" v-model=\"scope.row.batchNumber\" v-vue-onkeypress>\n                </template>\n              </el-table-column>\n            </el-table>\n            <!--请选择主品和奖励商品-->\n            <template v-if=\"isHuiKuan\">\n              <!--回款商品-->\n              <mainTable @selectAwardGoods=\"selectAwardGoods\" @delItem=\"delItem\" :items=\"mainList\"></mainTable>\n              <!--奖励商品-->\n              <subTable @selectAwardGoods=\"selectAwardGoods\" @delItem=\"delItem\" :items=\"subList\"></subTable>\n            </template>\n          </div>\n        </div>\n      </div>\n      <div class=\"containInfo_wraper\">\n        <div class=\"detail_title\"><i class=\"line_Icon\"></i>适用范围</div>\n        <div class = \"detail_table\">\n          <span class=\"viewRemark\" @click=\"setRange()\">设置</span>\n          <releaseRange ref=\"dialogSeleProMa\" :isView=\"false\"  :dialogRangeVisible=\"dialogRangeVisible\" :relRangeList =\"ruleForm.rangeList\" title =\"发布范围\" @setProvMange = \"setProvMange\"></releaseRange>\n        </div>\n      </div>\n    </el-form>\n    <div class=\"operateWraper\">\n      <div class=\"div-inline el-button-red\" @click = \"saveAddPolGoods\">保存</div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import goBack from 'src/components/goBack';\n  import departComponet from 'src/headComponent/departComponent';\n  import datepicker from 'components/data-plugin';\n  import elPagination from 'components/el-page';\n  import selectGoods from 'src/headComponent/selectGoods';\n  import releaseRange from './releaseRange';\n  import mainTable from 'src/pages/headquarter/marketManage/main_table';\n  import subTable from 'src/pages/headquarter/marketManage/sub_table';\n  import {getGoods, getRangeProvince, savePolGoods} from 'src/api/province_url/promotionPolicy';\n  export default {\n    data() {\n      return {\n        ruleForm:{\n          policyType: '',//政策类型\n          policyTypeCheck: '',//政策子类型\n          policyStartDate:'',//政策有效期\n          policyEndDate:'',//政策有效期\n          title:'',//政策名称\n          verificationStartDate: '',//核销起始时间\n          verificationEndDate: '',//核销结束时间\n          // departmentId: '',//事业部\n          remark: '',//政策说明\n\n          tableData1:[],//奖励商品policyType==2\n          tableData2:[],//单品回款奖励policyType==3\n          tableData5:[],//单品回款奖励 奖励商品policyType==3\n\n          tableData3:[],//多主品回款奖励policyType==4\n          tableData6:[],//多主品回款奖励 奖励商品 policyType==4\n\n          rangeList:[],\n          userId:[]//用户id\n        },\n        goodsList:'',//\n        policyType:'',\n        isradio:false,\n        dialogSeleGoodsVisible:false,//选择需回款商品\n\n        tableData: [{goodsNamem:\"\",specsMaxm:\"\"}],\n        selectType: '',//选择类型，主品“mulAwardGoods”，奖励为“”\n        mainList:[],//主品\n        subList: [],//奖励商品\n        goodsIdm:[],//主品id\n        goodsId:[],//奖励商品id\n        pageIndex: 1,//当前页\n        pageSize:10,\n        dialogRangeVisible:false,//适用范围弹窗\n        awardGoods: \"hide\",//选择需回款商品\n        handleType:'',//1需回款商品 2奖励商品\n        isHuiKuan:false,//是否为回款政策\n      }\n    },\n    created() {\n\n    },\n    components:{\n      goBack,\n      departComponet,\n      datepicker,\n      elPagination,\n      selectGoods,\n      releaseRange,\n      mainTable,\n      subTable\n    },\n    methods: {\n      //日期组件\n      changeSelect(val,type){console.log(val,type);\n        if(type == \"policyValidDate\"){\n          val.type == \"startDate\"?this.ruleForm.policyStartDate = val.data : this.ruleForm.policyEndDate = val.data;\n        }else{\n          val.type == \"startDate\"?this.ruleForm.verificationStartDate = val.data : this.ruleForm.verificationEndDate = val.data;\n        }\n      },\n      //选择需回款商品\n      selectAwardGoods(params){\n        if(params.handleType != undefined){\n          this.handleType = params.handleType;\n         }\n        if(params.pageIndex == 1){\n          this.pageIndex = params.pageIndex;\n        }\n        params.handleType=='1' ? this.selectType= 'mulAwardGoods' : this.selectType= '';\n        let datalist = {\n          goodsName:params.name == undefined?\"\":params.name,\n          pageIndex: this.pageIndex,\n          pageSize: this.pageSize\n        };\n        //奖励政策直接选择商品，单品和多品先选择主品再选择奖励商品\n        if(this.policyType!=''){\n          if((this.policyType !=2 && this.awardGoods=='show') || this.policyType ==2 || this.policyType !=2 && this.mainList.length>0){\n            getGoods(datalist).then( res =>{\n              this.goodsList = res.data.data;\n              this.$refs.dialogSeleGoods.dialogShow();\n            });\n          }else if(this.policyType !=2 && this.mainList.length == 0 && this.awardGoods=='hide'){\n            this.awardGoods='show';\n            this.isHuiKuan=true;\n          }\n        }else{\n          this.$message.success('请先选择政策类型');\n        }\n      },\n      //获取商品列表\n      getGoodsList(val){\n        this.pageIndex = val.pageIndex;\n        this.pageSize = val.pageSize;\n        let datalist = {\n          departmentIds: this.ruleForm.departmentId,\n          goodsName:this.$refs.dialogSeleGoods.formInline.goodsName,\n          pageIndex: this.pageIndex,\n          pageSize: this.pageSize\n        };\n        getGoods(datalist).then( res =>{\n          this.goodsList = res.data.data;\n        });\n      },\n      handleInput2(e) {\n        // 通过正则过滤小数点后两位\n//        e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\n      },\n      //选择商品确定按钮\n      uploadData(val){\n        if(this.ruleForm.policyType==2){//奖励商品\n          val.forEach((item, index, arr) => {\n            if(!this.goodsId.includes(item.id)){\n              let\tarraylist={\n                goodsId: item.id,//商品id--奖励商品的id\n                awardNum:'',//奖励数量\n                afterDiscountPrice: '',//折后价\n                batchNumber: '',//指定批号\n                goodsName: item.goodsName,//商品名称\n                specsMax: item.specsMax,//商品规格\n              }\n              this.ruleForm.tableData1.push(arraylist);\n              this.goodsId.push(item.id)//奖励商品id\n              this.ruleForm.userId = [];//清空使用范围\n            }\n          })\n          this.awardGoods='show';\n\n        }else if(this.ruleForm.policyType!=2){//单品和多品回款奖励\n          if(this.handleType == 1){//如果还没选择主品\n            val.forEach((item, index, arr) => {\n              if(!this.goodsIdm.includes(item.id)){\n                let arraylist='';\n                arraylist = {\n                  goodsIdm:  item.id,//商品id---主品的商品id--加了m区分\n                  goodsNamem: item.goodsName,//商品名称--主品的商品名字-加m区别奖励\n                  specsMaxm: item.specsMax,//商品规格-区分\n                  collectionNum: '',//回款商品数量\n                };\n                this.mainList.push(arraylist);\n                this.goodsIdm.push(item.id)//主品id\n                this.ruleForm.userId = [];//清空使用范围\n              }\n            })\n          }else if(this.handleType == 2){//已经选择主品\n            val.forEach((item, index, arr) => {\n              if(!this.goodsId.includes(item.id)){\n                let arraylist='';\n                arraylist ={\n                  goodsId: item.id,//商品id--奖励商品的id\n                  awardNum:'',//奖励数量\n                  afterDiscountPrice: '',//折后价\n                  batchNumber: '',//指定批号\n                  goodsName: item.goodsName,//商品名称\n                  specsMax: item.specsMax,//商品规格\n                }\n                this.subList.push(arraylist);\n                this.goodsId.push(item.id)//奖励商品id\n                this.ruleForm.userId = [];//清空使用范围\n              }\n            })\n          }\n          this.ruleForm.tableData2=[];\n          this.ruleForm.tableData3= [];\n          this.subList.forEach((item,index,arr) => {\n            let tablist={};\n            if(this.mainList.length-1<index){\n              tablist={...item, ...this.mainList[this.mainList.length-1]};\n            }else{\n              tablist={...item, ...this.mainList[index]};\n            }\n            this.policyType==3 ? this.ruleForm.tableData2.push(tablist) :this.ruleForm.tableData3.push(tablist);\n          })\n          this.tableData = this.mainList;\n          this.awardGoods='show';\n\n        }\n      },\n      //自定义表头\n      renderHeader(h) {\n        return h('div',[\n            h('span', '奖励商品'),\n            h('el-button', {\n              'class':['el-button--small'],\n              on:{\n                click: ()=>{this.selectAwardGoods({});console.log(\"赠品添加\")}\n                // click: ()=>{console.log(\"赠品添加\")}\n              }\n            },'添加奖励商品')\n          ]\n\n        )\n      },\n      renderHeader1(h) {\n        return h('div',[\n            h('span', '需回款商品'),\n            h('el-button', {\n              'class':['el-button--small'],\n              on:{\n                click: ()=>{this.selectAwardGoods(null , 'mulAwardGoods');console.log(\"主品添加\")}\n                // click: ()=>{console.log(\"主品添加\")}\n              }\n            },'添加需回款商品')\n          ]\n\n        )\n      },\n      //删除回款奖励商品\n      delItem(params){\n        if(params.handleType == 1){//删除需回款商品\n          this.mainList = this.mainList.filter(p=>p.goodsIdm!=params.goodId)\n          this.goodsIdm = this.goodsIdm.filter(p=>p!=params.goodId)\n        }\n        if(params.handleType == 2){//删除奖励商品\n          this.subList = this.subList.filter(p=>p.goodsId!=params.goodId)\n          this.goodsId = this.goodsId.filter(p=>p!=params.goodId)\n        }\n        this.ruleForm.userId = [];//清空使用范围\n      },\n      //删除政策回款商品\n      deleScopeRow(goodsId){\n        this.ruleForm.tableData1 = this.ruleForm.tableData1.filter(p=>p.goodsId!=goodsId);\n        this.goodsId = this.goodsId.filter(p=>p!=goodsId);\n        this.ruleForm.userId = [];//清空使用范围\n      },\n      //选择政策--重新赋值\n      policyChange(val){\n        this.ruleForm.policyType=val;\n        this.policyType= val;\n        this.awardGoods='hide';//商品列表隐藏\n        this.isHuiKuan=false;//商品列表隐藏\n        this.mainList = [];\n        this.subList = [];\n        this.goodsIdm = [];//主品id\n        this.goodsId = [];//奖励商品id\n        this.ruleForm.tableData1 = [];\n        this.tableData=[{goodsNamem:\"\",specsMaxm:\"\"}];\n      },\n\n      //适用范围\n      setRange(){\n        if(this.goodsId.length==0){\n          this.$message.success(\"请先选择回款商品\");\n        }else{\n          let datalist = {\n            goodsId: this.goodsId.toString(),\n            goodsIdm: this.goodsIdm.toString(),\n            policyType: this.policyType\n          };\n\n          getRangeProvince(datalist).then( res => {\n            this.ruleForm.rangeList = res.data.data;\n          });\n          this.$refs.dialogSeleProMa.dialogShow();\n        }\n      },\n      //关闭商品弹窗\n      closeGoodsDiolog(){\n        this.dialogSeleGoodsVisible =false;\n      },\n      //关闭适用范围弹窗\n      closeDiolog(){\n        this.dialogRangeVisible =false;\n      },\n\n      //点击分页\n      updataPage(val){\n        let datalist=this.getsearchInfo(val.pageIndex,val.pageSize);\n        this.initData(datalist)\n      },\n      //设置适用范围\n      setProvMange(val){\n        this.ruleForm.userId = [];\n        val.forEach(p => {\n          this.ruleForm.userId.push(p.userId);\n        })\n      },\n      //保存按钮\n      saveAddPolGoods(){\n        if(this.ruleForm.policyType==''){\n          this.$message.success(\"请选择政策类型\")\n          return false;\n        }else if(this.ruleForm.title.trim()==''){\n          this.$message.success(\"请输入政策名称\")\n          return false;\n        }else if(this.ruleForm.policyType==2&&this.ruleForm.policyTypeCheck==''){\n          this.$message.success(\"请选择政策子类型\")\n          return false;\n        }else if(this.ruleForm.policyStartDate==''||this.ruleForm.policyEndDate == ''){\n          this.$message.success(\"请选择政策有效期\")\n          return false;\n        }\n        let policyRule=[];\n        let isSubmit = false;\n        if(this.ruleForm.policyType==2){//奖励政策\n          if(this.ruleForm.tableData1.length>0){\n            let obj = {};\n            let _num = 0;\n            const _arr = this.ruleForm.tableData1.slice();\n            _arr.reverse().forEach(p=>{\n              if(p.awardNum.trim().length>0&&p.afterDiscountPrice.trim().length>0){\n                _num+=1;\n                obj = {\n                  \"goodsId\":p.goodsId //商品id\n                  ,\"awardNum\":p.awardNum//奖励数量，必填\n                  ,\"discountPrice\":p.afterDiscountPrice //折后价,必填\n                  ,\"batchNumber\":p.batchNumber   //指定批号\n                }\n                policyRule.push(obj);\n              }else{\n                if(p.awardNum.trim().length==0){\n                  this.$message.success(\"请输入【\"+p.goodsName+\"】的奖励数量\")\n                  isSubmit = false;\n                  return false;\n                }else if(p.afterDiscountPrice.trim().length==0){\n                  this.$message.success(\"请输入【\"+p.goodsName+\"】的折后价\")\n                  isSubmit = false;\n                  return false;\n                }\n              }\n            })\n            if(_num == this.ruleForm.tableData1.length){\n              isSubmit = true;\n            }else{\n              isSubmit = false;\n            }\n          }else{\n            this.$message.success(\"请完善政策规则\")\n            isSubmit = false;\n            return false;\n          }\n        }else{//回款奖励\n          const mainArray = [];\n          const subArray = [];\n          if(this.mainList.length==0){\n            this.$message.success(\"请添加需回款的商品\")\n            isSubmit = false;\n            return false;\n          }else{\n            const mainArr = this.mainList.slice();\n            let obj = {};\n            let _num = 0;\n            mainArr.reverse().forEach(p=>{\n              if(p.collectionNum.trim().length>0){\n                _num += 1;\n                obj = {\n                  \"goodsId\":p.goodsIdm//商品id\n                  ,\"collectionNum\": p.collectionNum//回款数量\n                }\n                mainArray.push(obj)\n              }else{\n                if(p.collectionNum.trim().length==0){\n                  this.$message.success(\"请输入【\"+p.goodsNamem+\"】的回款商品数量\");\n                  isSubmit = false;\n                  return false;\n                }\n              }\n            })\n            if(_num == this.mainList.length){\n              isSubmit = true;\n            }else{\n              isSubmit = false;\n            }\n          }\n          if(isSubmit){\n            if(this.subList.length==0){\n              this.$message.success(\"请添加奖励的商品\")\n              isSubmit = false;\n              return false;\n            }else{\n              const subArr = this.subList.slice();\n              let obj = {};\n              let _num = 0;\n              subArr.reverse().forEach(p=>{\n                if(p.awardNum.trim().length>0&&p.afterDiscountPrice.trim().length>0){\n                  _num += 1;\n                  obj = {\n                    \"goodsId\":p.goodsId  //商品id\n                    ,\"awardNum\":p.awardNum //奖励数量，必填\n                    ,\"discountPrice\":p.afterDiscountPrice //折后价,必填\n                    ,\"batchNumber\":p.batchNumber    //指定批号\n                  }\n                  subArray.push(obj)\n                }else{\n                  if(p.awardNum.trim().length==0){\n                    this.$message.success(\"请输入【\"+p.goodsName+\"】的奖励数量\")\n                    isSubmit = false;\n                    return false;\n                  }else if(p.afterDiscountPrice.trim().length==0){\n                    this.$message.success(\"请输入【\"+p.goodsName+\"】的折后价\")\n                    isSubmit = false;\n                    return false;\n                  }\n                }\n              })\n              if(_num == this.subList.length){\n                isSubmit = true;\n              }else{\n                isSubmit = false;\n              }\n            }\n            policyRule = {\n              \"mainArray\":mainArray\n              ,\"subArray\":subArray\n            }\n          }\n        }\n\n        if(isSubmit && this.ruleForm.userId.length==''){\n          this.$message.success(\"请设置适用范围\");\n          isSubmit = false;\n          return false;\n        }\n        if(isSubmit){\n          let datalist = {\n            policyType: this.ruleForm.policyType,//政策类型\n            policyStartDate: this.ruleForm.policyStartDate,//政策有效期\n            policyEndDate: this.ruleForm.policyEndDate,//政策有效期\n            title: this.ruleForm.title,//政策名称\n            verificationStartDate: this.ruleForm.verificationStartDate,//核销起始时间\n            verificationEndDate: this.ruleForm.verificationEndDate,//核销结束时间\n            remark: this.ruleForm.remark,//政策说明\n            policyRule: JSON.stringify(policyRule),\n            policyRange: this.ruleForm.userId.toString(),\n            policyTypeCheck:this.ruleForm.policyTypeCheck,//政策子类型\n          }\n          savePolGoods(datalist).then( res =>{\n            if(res.data.code == 1){\n              this.$router.go(-1);\n            }else{\n              this.$message.success(res.data.msg);\n            }\n          })\n        }\n      }\n    }\n  }\n</script>\n<style type=\"text/css\">\n  .el-form--inline .el-form-item__content{\n    vertical-align: middle;\n  }\n</style>\n<style lang=\"scss\" scoped=\"scoped\">\n\n  .containInfo_wraper {\n    margin: 20px 30px;\n    background: #ffff;\n    border: 1px solid #e6e6e6;\n    overflow: hidden;\n  .detail_title {\n    padding: 0 20px;\n    line-height: 50px;\n    color: #1f5dbc;\n    font-size: 14px;\n  .line_Icon {\n    display: inline-block;\n    width: 4px;\n    height: 14px;\n    vertical-align: middle;\n    margin-right: 5px;\n    border-radius: 20%;\n    background: #1f5dbc;\n  }\n  border-bottom:1px solid #e6e6e6;\n  }\n  .detail_content {\n    padding: 20px 29px 20px;\n    line-height: 49px;\n    font-size: 14px;\n  .poliyMark{\n    border:1px solid #e6e6e6;\n    border-radius:5px;\n    width:85%;\n    height:70px;\n    vertical-align: middle;\n    margin-left:20px;\n    padding:10px;\n    line-height:26px;\n  }\n\n  }\n  .table_wrap{\n    margin-top: 0;\n    border: none;\n    padding:20px 39px;\n  .tableInput{\n    border-radius: 4px;\n    border: 1px solid #dcdfe6;\n    box-sizing: border-box;\n    height: 40px;\n    line-height: 40px;\n    padding: 0 15px;\n    width: 60%;\n\n  }\n  }\n  .detail_table{\n    padding:20px 39px;\n  }\n  .viewRemark{\n    margin-left:10px;\n    color : #1f5dbc;\n    font-size:14px;\n  }\n  }\n  .operateWraper {\n    margin: 20px;\n    text-align: center;\n  .el-button-red {\n    padding: 0 0.5rem;\n  }\n\n  }\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/province/marketManage/add_promoPolicy.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"create_wraper\"},[_c('go-back',{attrs:{\"title\":\"新增促销政策\"}}),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-form-inline\",attrs:{\"model\":_vm.ruleForm,\"inline\":true,\"label-width\":\"100px\"}},[_c('div',{staticClass:\"containInfo_wraper\"},[_c('div',{staticClass:\"detail_title\"},[_c('i',{staticClass:\"line_Icon\"}),_vm._v(\"基本信息：\")]),_vm._v(\" \"),_c('div',{staticClass:\"detail_content\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":7}},[_c('el-form-item',{staticClass:\"is-required\",attrs:{\"label\":\"政策类型：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择政策类型\"},on:{\"change\":_vm.policyChange},model:{value:(_vm.ruleForm.policyType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"policyType\", $$v)},expression:\"ruleForm.policyType\"}},[_c('el-option',{key:\"1\",attrs:{\"label\":\"奖励政策\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{key:\"2\",attrs:{\"label\":\"回款奖励\",\"value\":\"3\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":7}},[_c('el-form-item',{staticClass:\" is-required\",attrs:{\"label\":\"政策名称：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入政策名称\"},model:{value:(_vm.ruleForm.title),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"title\", $$v)},expression:\"ruleForm.title\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_c('div',{staticClass:\"div-inline el-form-item is-required\"},[_c('div',{staticClass:\"div-inline el-form-item__label\"},[_vm._v(\"政策有效期：\")]),_vm._v(\" \"),_c('datepicker',{staticClass:\"div-inline\",attrs:{\"startIsShow\":\"true\",\"endIsShow\":\"true\"},on:{\"changeSelect\":function (value) { return _vm.changeSelect(value, 'policyValidDate'); }}})],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_c('div',{staticClass:\"div-inline el-form-item\"},[_c('div',{staticClass:\"div-inline\"},[_vm._v(\"核销期间：\")]),_vm._v(\" \"),_c('datepicker',{staticClass:\"div-inline\",attrs:{\"startIsShow\":\"true\",\"endIsShow\":\"true\"},on:{\"changeSelect\":function (value) { return _vm.changeSelect(value, 'verifyDate'); }}})],1)]),_vm._v(\" \"),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ruleForm.policyType == 2),expression:\"ruleForm.policyType == 2\"}],attrs:{\"span\":7}},[_c('div',{staticClass:\"div-inline el-form-item is-required\"},[_c('div',{staticClass:\"div-inline el-form-item__label\"},[_vm._v(\"政策子类型：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择政策子类型\"},model:{value:(_vm.ruleForm.policyTypeCheck),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"policyTypeCheck\", $$v)},expression:\"ruleForm.policyTypeCheck\"}},[_c('el-option',{attrs:{\"label\":\"请选择政策子类型\",\"value\":\"\"}}),_vm._v(\" \"),_c('el-option',{key:\"1\",attrs:{\"label\":\"人员变动\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{key:\"2\",attrs:{\"label\":\"库存处理\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{key:\"3\",attrs:{\"label\":\"纯回款奖励\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{key:\"4\",attrs:{\"label\":\"会议奖励\",\"value\":\"4\"}})],1)],1)])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":20}},[_vm._v(\"政策说明:\"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ruleForm.remark),expression:\"ruleForm.remark\"}],staticClass:\"poliyMark\",attrs:{\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.ruleForm.remark)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.ruleForm, \"remark\", $event.target.value)}}})])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"containInfo_wraper\"},[_c('div',{staticClass:\"detail_title\"},[_c('i',{staticClass:\"line_Icon\"}),_vm._v(\"政策规则\")]),_vm._v(\" \"),_c('div',{staticClass:\"table_wrap\"},[_c('select-goods',{ref:\"dialogSeleGoods\",attrs:{\"title\":\"选择商品\",\"goodsList\":_vm.goodsList,\"policyType\":_vm.policyType,\"isradio\":_vm.isradio},on:{\"getGoodsList\":_vm.getGoodsList,\"selectAwardGoods\":_vm.selectAwardGoods,\"closeGoodsDiolog\":_vm.closeGoodsDiolog,\"uploadData\":_vm.uploadData}}),_vm._v(\" \"),(_vm.awardGoods=='hide')?_c('div',{staticClass:\"viewRemark\",on:{\"click\":_vm.selectAwardGoods}},[_vm._v(\"请选择需回款商品\")]):_vm._e(),_vm._v(\" \"),(_vm.awardGoods=='show')?_c('div',[(_vm.ruleForm.policyType==2)?_c('el-table',{attrs:{\"data\":_vm.ruleForm.tableData1,\"border\":\"\",\"tooltip-effect\":\"dark\"}},[_c('el-table-column',{attrs:{\"render-header\":_vm.renderHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.goodsName)),_c('span',{staticClass:\"viewRemark\",on:{\"click\":function($event){_vm.deleScopeRow(scope.row.goodsId)}}},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(scope.row.specsMax))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"awardNum\",\"label\":\"奖励数量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(scope.row.awardNum),expression:\"scope.row.awardNum\"},{name:\"vue-onkeypress\",rawName:\"v-vue-onkeypress\"}],staticClass:\"tableInput\",attrs:{\"type\":\"number\",\"oninput\":\"if(value.length>8)value=value.slice(0,8)\"},domProps:{\"value\":(scope.row.awardNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"awardNum\", $event.target.value)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"afterDiscountPrice\",\"label\":\"折后价\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(scope.row.afterDiscountPrice),expression:\"scope.row.afterDiscountPrice\"}],staticClass:\"tableInput\",attrs:{\"type\":\"number\",\"oninput\":\"if(value.length>8)value=value.slice(0,8)\"},domProps:{\"value\":(scope.row.afterDiscountPrice)},on:{\"keydown\":_vm.handleInput2,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"afterDiscountPrice\", $event.target.value)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"batchNumber\",\"label\":\"指定批号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(scope.row.batchNumber),expression:\"scope.row.batchNumber\"},{name:\"vue-onkeypress\",rawName:\"v-vue-onkeypress\"}],staticClass:\"tableInput\",domProps:{\"value\":(scope.row.batchNumber)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"batchNumber\", $event.target.value)}}})]}}])})],1):_vm._e(),_vm._v(\" \"),(_vm.isHuiKuan)?[_c('mainTable',{attrs:{\"items\":_vm.mainList},on:{\"selectAwardGoods\":_vm.selectAwardGoods,\"delItem\":_vm.delItem}}),_vm._v(\" \"),_c('subTable',{attrs:{\"items\":_vm.subList},on:{\"selectAwardGoods\":_vm.selectAwardGoods,\"delItem\":_vm.delItem}})]:_vm._e()],2):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"containInfo_wraper\"},[_c('div',{staticClass:\"detail_title\"},[_c('i',{staticClass:\"line_Icon\"}),_vm._v(\"适用范围\")]),_vm._v(\" \"),_c('div',{staticClass:\"detail_table\"},[_c('span',{staticClass:\"viewRemark\",on:{\"click\":function($event){_vm.setRange()}}},[_vm._v(\"设置\")]),_vm._v(\" \"),_c('releaseRange',{ref:\"dialogSeleProMa\",attrs:{\"isView\":false,\"dialogRangeVisible\":_vm.dialogRangeVisible,\"relRangeList\":_vm.ruleForm.rangeList,\"title\":\"发布范围\"},on:{\"setProvMange\":_vm.setProvMange}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"operateWraper\"},[_c('div',{staticClass:\"div-inline el-button-red\",on:{\"click\":_vm.saveAddPolGoods}},[_vm._v(\"保存\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4e727ca9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/province/marketManage/add_promoPolicy.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e727ca9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./add_promoPolicy.vue\")\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e727ca9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=1!./add_promoPolicy.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add_promoPolicy.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add_promoPolicy.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e727ca9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./add_promoPolicy.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4e727ca9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/province/marketManage/add_promoPolicy.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}